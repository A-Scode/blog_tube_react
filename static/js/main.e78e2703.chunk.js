(this.webpackJsonpblog_tube=this.webpackJsonpblog_tube||[]).push([[0],{145:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var s=n(1),i=n.n(s),a=n(54),o=n.n(a),r=(n(80),n(2)),c=n(4),l=n(7),u=n(13),d=n(26),b=n.n(d),g=n(32),p=n(15),j=n(9),f=n(6),m=(n(86),n.p+"static/media/blogTubeIcon.128b206c.svg"),h=n.p+"static/media/menu_icon.5eada420.svg",O=n.p+"static/media/menu_icon3.b09f12f9.svg",x=n.p+"static/media/search_icon.d5f5082f.svg",v=n(5),_=(n(87),n.p+"static/media/unkownUser.dfda0594.svg"),y=n(0),w=function(e){var t,n=Object(s.useContext)(Ie),i=Object(s.useRef)(""),a=Object(s.useState)({width:e.width,aspectRatio:"1 / 1",borderRadius:"100%",borderStyle:"inset",backgroundColor:"rgb(255 255 255 / 55%)",boxShadow:"0px 0px 8px 3px #3b3b3b8c",borderWidth:"4px",borderColor:"#0334dd",backgroundSize:"contain",backgroundPosition:"center",alignSelf:"center",justifySelf:"center",backgroundRepeat:"no-repeat"}),o=Object(r.a)(a,2),c=o[0],u=o[1];return Object(s.useEffect)((function(){new IntersectionObserver((function(s,i){s[0].intersectionRatio>0&&function(){if(!1===t)if("unknown"===e.user_id)u(Object(j.a)(Object(j.a)(Object(j.a)({},c),e.style),{},{backgroundImage:"url(".concat(_,")")})),t=!0;else{var s=new XMLHttpRequest;s.open("POST",v.origin+"backend_api/getprofilephoto"),s.responseType="blob",s.onreadystatechange=function(){if(4===s.readyState&&200===s.status){var n=s.response;u(Object(j.a)(Object(j.a)(Object(j.a)({},c),e.style),{},{backgroundImage:"url(".concat(URL.createObjectURL(n),")")})),t=!0}},s.setRequestHeader("session",n||""),s.setRequestHeader("photouid",e.user_id),s.send()}}()})).observe(i.current),t=!1,u(Object(j.a)(Object(j.a)({},c),e.style))}),[e.user_id,n,sessionStorage]),Object(y.jsx)(l.Link,{to:e.to,ref:function(e){return i.current=e},style:c,onClick:function(){return e.onClick()}})},k=function(){if(sessionStorage.session){var e=new XMLHttpRequest;e.open("POST",v.origin+"backend_api/logout"),e.onreadystatechange=function(){4===e.readyState&&200===e.status&&(console.log("successfully Logged Out"),delete sessionStorage.session,delete sessionStorage.login_data)},e.setRequestHeader("session",sessionStorage.session),e.setRequestHeader("user_id",JSON.parse(sessionStorage.login_data).user_id),e.send()}},S=n.p+"static/media/homeIcon.c4907387.svg",C=n(3),N=n.n(C),R=n.p+"static/media/password.3375a746.svg",L=n.p+"static/media/logoutIcon.eed3c053.svg",I=n.p+"static/media/uploadblogIcon.c36f5bb5.svg",E=n.p+"static/media/blogians.047f5f0d.svg",T=n.p+"static/media/moon.7ec26fc7.svg",P=n.p+"static/media/sun.db9ca0d9.svg";var F=function(e){var t={width:"60%",position:"inherit",backgroundImage:"url(".concat(e.img,")"),backgroundRepeat:"no-repeat",backgroundSize:"25px 25px",backgroundPosition:"0px 0px",paddingLeft:"40px",minHeight:"30px",fontSize:"25px",fontWeight:"500",fontFamily:"sans-serif"},n=Object(s.useCallback)((function(){i.push(e.to),e.onClick(),!0===e.logout&&k()})),i=Object(c.k)();return Object(y.jsx)(l.Link,{onClick:function(){return n()},style:{textDecoration:"none"},children:Object(y.jsx)("div",{style:{position:"inherit",width:"100%",height:"100%",display:"flex",justifyContent:"center",placeItems:"center"},className:"menuItem",children:Object(y.jsx)("div",{style:t,children:e.children})})})};F.propType={to:N.a.string,img:N.a.string.isRequired};var H=function(e){var t=Object(s.useRef)({}),n=0;function i(s){var a,o=t.current.menu_container.getElementsByTagName("*"),r=!0,c=Object(p.a)(o);try{for(c.s();!(a=c.n()).done;){a.value===s.target&&(r=!1)}}catch(l){c.e(l)}finally{c.f()}r&&(1===(n+=1)&&(e.onClick(),n=0),s.target.removeEventListener("click",i,!0))}var a=Object(s.useContext)(Ie);Object(s.useEffect)((function(){var n;n=t.current.menu_box,e.open?(n.style.display="flex",n.style.transform="translateX(0px)",n.style.backdropFilter="brightness(0.6)",n.addEventListener("click",i,!0)):d.matches?n.style.display="none":(n.style.transform="translateX(-270px)",n.style.backdropFilter="brightness(1)",setTimeout((function(){n.style.display="none"}),300))}),[e.open]);var o=Object(s.useState)(Boolean(sessionStorage.session)),c=Object(r.a)(o,2),l=c[0],u=c[1];Object(s.useEffect)((function(){sessionStorage.session===a&&Boolean(sessionStorage.session)&&Boolean(a)?(u(!0),console.log("login",l)):u(!1)}),[sessionStorage.session,a]);var d=window.matchMedia("(min-width: 576px)");try{d.matches||(t.current.menu_container.style.left=0)}catch(j){console.log(j)}var b=Object(s.useCallback)((function(){if(Boolean(sessionStorage.session))return JSON.parse(sessionStorage.getItem("login_data")).user_id;return"unknown"}),[sessionStorage]),g=Object(s.useContext)(Ee);return Object(s.useEffect)((function(){console.log(g),"Dark"===g?(t.current.theme_button.style.background="center / 30px 30px url(".concat(P,") no-repeat"),t.current.menu_container.style.color="white",t.current.menu_container.style.backgroundColor="#353535"):(t.current.theme_button.style.background="center / 30px 30px url(".concat(T,") no-repeat"),t.current.menu_container.style.color="black",t.current.menu_container.style.backgroundColor="white")}),[g,t]),Object(y.jsx)("div",{className:"menu_box",id:"menu_box",ref:function(e){return t.current.menu_box=e},children:Object(y.jsxs)("div",{className:"menu_container",id:"menu_container",ref:function(e){return t.current.menu_container=e},children:[Object(y.jsxs)("div",{className:"nameImage",style:{display:"grid",gridTemplateRows:" 70% 30% "},children:[Object(y.jsx)("button",{id:"theme",ref:function(e){return t.current.theme_button=e},onClick:function(){return"Light"===g?e.change_theme("Dark"):e.change_theme("Light")}}),Object(y.jsx)(w,{onClick:function(){return e.onClick()},width:"80px",style:{alignSelf:"end"},height:"80px",to:l?"/Profile/".concat(b()):"/Signup",user_id:b(),login_state:e.login_state}),Object(y.jsx)("h2",{align:"center",style:{margin:0,padding:0,fontFamily:"play",fontSize:"28px",color:"#0066ed",lineHeight:2,maxWidth:"80%",textOverflow:"ellipsis",justifySelf:"center"},children:l&&void 0!==sessionStorage.login_data?JSON.parse(sessionStorage.login_data).username:""})]}),Object(y.jsx)(F,{onClick:function(){return e.onClick()},img:S,to:"/Home",children:"Home"}),Object(y.jsx)(F,{onClick:function(){return e.onClick()},to:"/Blogians",img:E,children:"Blogians"}),Object(y.jsx)(F,{onClick:function(){return e.onClick()},to:"/UploadBlog",img:I,children:"Upload Blog"}),Object(y.jsx)(F,{onClick:function(){return e.onClick()},to:"/Login",logout:!!l,img:l?L:R,children:l?"Logout":"Login"})]})})},B=function(e){var t;document.documentElement.style.setProperty("--search_icon_url","url(".concat(x,")"));var n=Object(s.useState)(h),i=Object(r.a)(n,2),a=i[0],o=i[1],c=Object(s.useRef)({}),l=Object(s.useState)(e.bloglist),u=Object(r.a)(l,2),d=u[0],b=u[1];Object(s.useEffect)((function(){b(Object(f.a)(e.bloglist))}),[e.bloglist]);var v=window.matchMedia("(max-width: 768px)");v.onchange=function(){S(v.matches)};var _=Object(s.useState)(v.matches),w=Object(r.a)(_,2),k=w[0],S=w[1],C={display:"none",position:"fixed",width:"100vw",height:"100vh",top:0,bottom:0,left:0,right:0,justifyContent:"center",pointerEvents:"auto ",zIndex:6,backdropFilter:"blur(2px)"},N=Object(s.useState)(C),R=Object(r.a)(N,2),L=R[0],I=R[1],E=function(){a===h?(o(O),J(!0),console.log("menuImage is equal to menuIcon")):(o(h),J(!1),console.log("menuImage !!!! equal to menuIcon"))},T=function(e){try{c.current.searchIconResponsive.style.backgroundImage="url(".concat(x,")"),I(Object(j.a)(Object(j.a)({},C),{},{display:e})),c.current.searchIconResponsive.focus(),document.addEventListener("click",F,!0),setTimeout((function(){return c.current.searchIconResponsive.focus()}),500)}catch(t){}},P=function(e){try{c.current.blogList.style.display=e}catch(t){}},F=function e(t){t.target!=c.current.searchIcon&&t.target!=c.current.searchIconResponsive&&(v.matches?T("none"):P("none"),document.removeEventListener("click",e,!0))};window.addEventListener("resize",(function(){v.matches&&c.current.blogList&&P("none")})),v.matches||window.addEventListener("click",(function e(t){v.matches?v.matches&&("searchInputResponsive"===t.target.id?I(Object(j.a)(Object(j.a)({},C),{},{display:"flex"})):t.target!=c.current.searchIconResponsive&&t.target!=c.current.searchIcon&&I(Object(j.a)(Object(j.a)({},C),{},{display:"none"})),window.removeEventListener("click",e,!0)):t.target!=c.current.searchIcon&&t.target!=c.current.blogList&&setTimeout((function(){return P("none")}),200)}),!0);var B=Object(s.useCallback)((function(){try{var t,n=c.current.searchIcon.value.toLowerCase(),s=e.bloglist,i={},a=[],o=Object(p.a)(s);try{for(o.s();!(t=o.n()).done;){var r=t.value,l=r.toLowerCase().search(n);l>-1&&(i[s.indexOf(r)]=l)}}catch(j){o.e(j)}finally{o.f()}var u,d=Object(p.a)(Object.keys(i).sort());try{for(d.s();!(u=d.n()).done;){var g=u.value;a.push(s[g])}}catch(j){d.e(j)}finally{d.f()}b([].concat(a))}catch(j){}}),[d,c]),V=Object(s.useState)(!1),D=Object(r.a)(V,2),M=D[0],J=D[1],U=Object(s.useRef)({}),X=Object(s.useContext)(Ee);return Object(s.useEffect)((function(){if("Dark"===X){U.current.header.style.backgroundColor="#353535",U.current.header.style.color="white",c.current.searchIconResponsive?c.current.searchIconResponsive.style.color="white":console.log("no");try{c.current.searchIcon?c.current.searchIcon.style.color="white":console.log("no"),c.current.searchIconResponsive?c.current.searchIconResponsive.style.color="white":console.log("no"),U.current.no_blogs?U.current.no_blogs.style.backgroundColor="#353535":console.log(),U.current.no_blogs?U.current.no_blogs.style.color="white":console.log()}catch(e){}}else{U.current.header.style.backgroundColor="white",U.current.header.style.color="black",c.current.searchIconResponsive?c.current.searchIconResponsive.style.color="black":console.log("no");try{c.current.searchIcon?c.current.searchIcon.style.color="black":console.log("no"),c.current.searchIconResponsive?c.current.searchIconResponsive.style.color="black":console.log("no"),U.current.no_blogs?U.current.no_blogs.style.backgroundColor="white":console.log(),U.current.no_blogs?U.current.no_blogs.style.color="black":console.log()}catch(t){}}}),[X,U,d]),Object(y.jsxs)("div",{className:"header",ref:function(e){return U.current.header=e},children:[Object(y.jsx)(H,{open:M,login_state:e.login_state,change_theme:e.change_theme,onClick:function(){return E()}}),Object(y.jsx)("div",{className:"menuicon",children:Object(y.jsx)("img",{src:a,id:"menuIcon",ref:function(e){return c.current.menuIcon=e},onClick:function(){return E()},alt:"menuIcon"})}),Object(y.jsxs)("h1",{id:"blog_tube",children:[" ",Object(y.jsx)("img",{src:m,id:"logo"})," Blog Tube"]}),k?Object(y.jsx)("img",{src:x,id:"searchIcon",ref:function(e){return c.current.searchIcon=e},onClick:function(){T("flex"),J(!1)}}):Object(y.jsx)("input",(t={ref:function(e){return c.current.searchIcon=e},placeholder:"Search Blogs",onInput:B,onFocus:B,id:"searchInput"},Object(g.a)(t,"onFocus",(function(){return P("block")})),Object(g.a)(t,"type","text"),t),0),Object(y.jsx)("div",{id:"blogList",ref:function(e){return c.current.blogList=e},children:0!==d.length?d.map((function(e,t){return Object(y.jsx)(q,{e:e,style:{backgroundColor:"Dark"===X?"#353535":"white"}},t)})):Object(y.jsx)("div",{className:"blog_elems",children:" No Blogs Found"})}),k?Object(y.jsxs)("div",{id:"search",style:L,children:[k?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("input",{ref:function(e){return c.current.searchIconResponsive=e},placeholder:"Search Blogs",onInput:B,id:"searchInputResponsive",type:"text",autoFocus:!0}),"    "]}):null,Object(y.jsx)("div",{id:"blogListContainer",children:0!==d.length?d.map((function(e,t){return Object(y.jsx)(q,{e:e,style:{backgroundColor:"Dark"===X?"#353535":"white"}},t)})):Object(y.jsx)("div",{className:"blog_elems",ref:function(e){return U.current.no_blogs=e},children:" No Blogs Found"})})]}):null]})},q=function(e){return Object(y.jsx)(l.Link,{to:"/Blog/".concat(e.e.blog_details.title,"?id=").concat(e.e.blog_details.blog_id),children:Object(y.jsx)("div",{className:"blog_elems",style:e.style,children:e.e.blog_details.title})})},V=(n(89),n.p+"static/media/github.8eef9a2f.svg"),D=n.p+"static/media/facebook.3bb56ad2.svg",M=n.p+"static/media/instagram.3268dfd0.svg",J=function(e){var t=Object(s.useRef)({});Object(s.useEffect)((function(){try{var t=e.appbody;t.addEventListener("scroll",(function(n){var s=t.getBoundingClientRect().height;t.scrollTop+s===t.scrollHeight?e.appcontainer.scroll(0,e.appcontainer.scrollHeight):e.appcontainer.scroll(0,0)}))}catch(n){console.log(n)}}),[e.appbody,e.appcontainer]);var n=Object(s.useContext)(Ee);return Object(s.useEffect)((function(){t.current.footer.style.backgroundColor="Dark"===n?"#032187":"#0334dd"}),[n,t]),Object(y.jsxs)("div",{className:"footer",ref:function(e){return t.current.footer=e},children:[Object(y.jsxs)("div",{className:"aboutus",children:[Object(y.jsxs)("p",{children:[Object(y.jsx)("strong",{children:" Developer "}),Object(y.jsx)("pre",{children:":"})," ",Object(y.jsx)("code",{children:"Shouryaraj Singh"})]}),Object(y.jsxs)("p",{children:[Object(y.jsx)("strong",{children:"Contact "})," ",Object(y.jsx)("pre",{children:":"})," ",Object(y.jsx)("code",{children:" 96XXXXXXXX "})]}),Object(y.jsxs)("p",{children:[Object(y.jsx)("strong",{children:"Email"})," ",Object(y.jsx)("pre",{children:":"})," ",Object(y.jsx)("code",{children:"shouryarajsinghgoud@gmail.com"})]})]}),Object(y.jsx)("div",{className:"github",children:Object(y.jsx)("a",{target:"_blank",href:"https://github.com/A-Scode",children:Object(y.jsx)("img",{src:V,alt:"github",height:"50",width:"50"})})}),Object(y.jsx)("div",{className:"facebook",children:Object(y.jsx)("a",{target:"_blank",href:"https://www.facebook.com/shouryarajsingh.goud",children:Object(y.jsx)("img",{src:D,alt:"github",height:"50",width:"50"})})}),Object(y.jsx)("div",{className:"insta",children:Object(y.jsx)("a",{target:"_blank",href:"https://www.instagram.com/shouryaraj_singh/",children:Object(y.jsx)("img",{src:M,alt:"github",height:"50",width:"50"})})})]})},U=(n(90),n.p+"static/media/email.e322bd87.svg"),X=n.p+"static/media/form_background.cfae2e28.svg",z=n(37),W=function(e){var t=Object(s.useRef)({}),n=Object(s.useState)("form"),i=Object(r.a)(n,2),a=i[0],o=i[1],u=Object(c.k)();Object(s.useEffect)((function(){try{Object(z.a)({targets:t.current.heading,update:function(e){try{t.current.heading.style.filter="hue-rotate(".concat(3.6*e.progress,"deg)")}catch(n){}},duration:2e3,autoplay:!0,direction:"alternate",loop:!0}),a&&(t.current.form.style.backgroundImage="url(".concat(X,")"),t.current.email&&(t.current.email.style.backgroundImage="url(".concat(U,")")),t.current.confirm_password&&(t.current.confirm_password.style.backgroundImage="url(".concat(R,")")),t.current.password.style.backgroundImage="url(".concat(R,")"))}catch(e){console.log(e)}}),[t,a]);var d=v.origin,b=Object(s.useCallback)((function(t){t.preventDefault();var n=t.target,s=n[0],i=n[1],a=new XMLHttpRequest;a.open("POST","".concat(d,"backend_api/loginmanully")),e.appbodyloading("flex"),a.onreadystatechange=function(){if(200===a.status&&4===a.readyState){var t=JSON.parse(a.response);if("fail"===t.status)o("error"),e.appbodyloading("none");else if("not_match"===t.status)i.focus(),i.setCustomValidity("\u26a0\ufe0finvalid password\u26a0\ufe0fForgot password ?"),i.reportValidity(),setTimeout((function(){return i.setCustomValidity("")}),2e3),e.appbodyloading("none");else if("success"===t.status){k(),e.change_login_context(t.session),sessionStorage.setItem("session",t.session);var n=JSON.stringify(t.login_data);localStorage.login_data=n,sessionStorage.login_data=n,u.push("/Home"),e.appbodyloading("none")}}},a.setRequestHeader("credentails",JSON.stringify({email:s.value,password:i.value})),a.send()})),g=Object(s.useContext)(Ee);Object(s.useEffect)((function(){"Dark"===g?(t.current.email?t.current.email.style.color="white":console.log(),t.current.password?t.current.password.style.color="white":console.log(),t.current.confirm_password?t.current.confirm_password.style.color="white":console.log()):(t.current.email?t.current.email.style.color="none":console.log(),t.current.password?t.current.password.style.color="none":console.log(),t.current.confirm_password?t.current.confirm_password.style.color="none":console.log())}),[g,t,a]);var p=Object(s.useMemo)((function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{align:"center",ref:function(e){return t.current.heading=e},children:"Login"}),Object(y.jsxs)("form",{action:"javascript:void(0);",method:"POST",onSubmit:function(e){return b(e)},children:[Object(y.jsx)("input",{id:"email",maxLength:100,type:"email",ref:function(e){return t.current.email=e},placeholder:"Email",required:!0}),Object(y.jsx)("input",{type:"password",minLength:8,maxLength:100,id:"password",ref:function(e){return t.current.password=e},placeholder:"Password",required:!0}),Object(y.jsx)("input",{className:"submit",type:"submit",value:"Login"}),Object(y.jsx)("div",{className:"redirectSignup",children:Object(y.jsxs)("p",{children:["Didn't Have an account?",Object(y.jsx)(l.Link,{to:"/Signup",children:"SignUp"}),Object(y.jsx)("br",{}),Object(y.jsx)("a",{href:"javascript:void(0);",onClick:function(){return o("ask_email")},children:"Forgot Password "})]})})]})]})})),j=Object(s.useMemo)((function(){return Object(y.jsxs)("div",{className:"error",children:[Object(y.jsx)("h2",{ref:function(e){return t.current.heading=e},align:"cetner",children:"Invalid Credentials"}),Object(y.jsx)("button",{className:"back",onClick:function(){return o("form")},children:"Back"})]})})),f=Object(s.useCallback)((function(t){var n=t.target[0].value,s=new XMLHttpRequest;s.open("POST",d+"backend_api/forgototp"),e.appbodyloading("flex"),s.onreadystatechange=function(){if(200===s.status&&4===s.readyState){var t=JSON.parse(s.response);console.log(t),"error"===t.status?(o("error"),e.appbodyloading("none")):"success"===t.status&&(o("otp"),e.appbodyloading("none"))}},s.setRequestHeader("userData",JSON.stringify({email:n})),s.send()})),m=Object(s.useMemo)((function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{align:"center",ref:function(e){return t.current.heading=e},children:"Email"}),Object(y.jsx)("div",{className:"forgot_form",children:Object(y.jsxs)("form",{action:"javascript:void(0);",onSubmit:f,children:[Object(y.jsx)("input",{type:"email",id:"email",ref:function(e){return t.current.email=e},placeholder:"Email",required:!0}),Object(y.jsx)("input",{className:"submit",type:"submit",value:"Submit"})]})})]})})),h=Object(s.useCallback)((function(t){var n=t.target[0],s=new XMLHttpRequest;s.open("POST",d+"backend_api/validateforgototp"),e.appbodyloading("flex"),s.onreadystatechange=function(){if(200===s.status&&4===s.readyState){var t=JSON.parse(s.response);console.log(t),"fail"===t.status?(n.focus(),n.setCustomValidity("\u26a0\ufe0finvalid OTP\u26a0\ufe0f"),n.reportValidity(),e.appbodyloading("none")):"success"===t.status&&(o("change_password"),e.appbodyloading("none"))}},s.setRequestHeader("otp",n.value),s.send()})),O=Object(s.useCallback)((function(e){e.target.value.length>4?(e.target.setCustomValidity("OTP must be of 4 digit"),e.target.reportValidity()):e.target.value.length<4?e.target.setCustomValidity("OTP must have 4 digits"):e.target.setCustomValidity("")})),x=Object(s.useMemo)((function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{align:"center",ref:function(e){return t.current.heading=e},children:"OTP"}),Object(y.jsx)("div",{className:"forgot_form",children:Object(y.jsxs)("form",{action:"javascript:void(0);",onSubmit:h,children:[Object(y.jsx)("input",{type:"number",onInput:O,id:"password",ref:function(e){return t.current.password=e},placeholder:"OTP",required:!0,style:{fontSize:"35px",letterSpacing:"20px",paddingLeft:"60px"}}),Object(y.jsx)("input",{className:"submit",type:"submit",value:"Submit"})]})})]})})),_=Object(s.useCallback)((function(t){var n=t.target[1],s=new XMLHttpRequest;s.open("POST",d+"backend_api/changepassword"),e.appbodyloading("flex"),s.onreadystatechange=function(){if(200===s.status&&4===s.readyState){var t=JSON.parse(s.response);"fail"===t.status?(n.focus(),n.setCustomValidity("Something went wrong"),n.reportValidity(),e.appbodyloading("none")):"success"===t.status&&(o("form"),e.appbodyloading("none"))}},s.setRequestHeader("newpass",n.value),s.send()})),w=Object(s.useMemo)((function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{align:"center",ref:function(e){return t.current.heading=e},children:"Change"}),Object(y.jsxs)("form",{action:"javascript:void(0);",onSubmit:_,children:[Object(y.jsx)("input",{type:"password",minLength:8,maxLength:100,id:"password",ref:function(e){return t.current.password=e},placeholder:"New password",required:!0}),Object(y.jsx)("input",{type:"password",minLength:8,maxLength:100,id:"password",onInput:function(e){return e.target.setCustomValidity("")},ref:function(e){return t.current.confirm_password=e},placeholder:"Confirm password",required:!0}),Object(y.jsx)("input",{className:"submit",type:"submit",value:"Change"})]})]})}));return Object(y.jsx)("div",{className:"login",children:Object(y.jsxs)("div",{className:"form",ref:function(e){return t.current.form=e},children:["form"===a?p:null,"ask_email"===a?m:null,"otp"===a?x:null,"change_password"===a?w:null,"error"===a?j:null]})})},A=(n(91),n.p+"static/media/username.1bd59be1.svg"),Y=n.p+"static/media/upload_image_background.20b410ac.svg",G=n.p+"static/media/signup_background.7e498824.svg",$=function(e){var t={"!":null,"#":null,$:null,"%":null,"^":null,"&":null,"*":null,"(":null,")":null,"'":null,'"':null,";":null,":":null};function n(e){'"'===e.nativeEvent.data||"'"===e.nativeEvent.data?(e.target.value=e.target.value.slice(0,e.target.value.length-1),e.target.setCustomValidity("Cannot use \" or ' "),e.target.reportValidity()):e.target.setCustomValidity("")}var i=Object(s.useRef)({});Object(s.useEffect)((function(){try{Object(z.a)({targets:i.current.signup_heading,update:function(e){try{i.current.signup_heading.style.filter="hue-rotate(".concat(3.6*e.progress,"deg)")}catch(t){}},duration:2e3,autoplay:!0,direction:"alternate",loop:!0}),c()}catch(e){console.log(e)}}),[i,b]);var a,o,c=function(){i.current.signup_form.style.backgroundImage="url(".concat(G,")"),i.current.username.style.backgroundImage="url(".concat(A,")"),i.current.password.style.backgroundImage="url(".concat(R,")"),i.current.email.style.backgroundImage="url(".concat(U,")"),i.current.image.style.backgroundImage="url(".concat(Y,")")},u=Object(s.useState)("form"),d=Object(r.a)(u,2),b=d[0],g=d[1],p=v.origin,j=Object(s.useRef)({});function m(){try{if(""!==i.current.image_input.value&&i.current.image_input.value!==o)if(i.current.image_input.files[0].size>=10485760)alert("**File size must be under 10MB**"),i.current.image_input.value="",i.current.image.style.backgroundImage="none";else{try{var e=URL.createObjectURL(i.current.image_input.files[0]);i.current.image.style.backgroundImage="url(".concat(e,")")}catch(t){console.log(t)}o=i.current.image_input.value,clearInterval(a)}}catch(t){}}var h=Object(s.useCallback)((function(t){var n=t.target[0];if(4!==n.value.length)return n.focus(),n.setCustomValidity("OTP must be of 4 digits!!!"),void n.reportValidity();n.setCustomValidity(""),n.reportValidity();var s=new XMLHttpRequest;e.appbodyloading("flex"),s.open("POST",p+"backend_api/verifyotp"),s.onreadystatechange=function(){if(200===s.status&&4===s.readyState){var t=JSON.parse(s.response);console.log(t),"fail"===t.status?(n.focus(),n.setCustomValidity("\u26a0\ufe0f Wrong OTP\u26a0\ufe0f Signup Again!!! "),n.reportValidity(),setTimeout((function(){g("form"),c()}),2e3),e.appbodyloading("none")):"success"===t.staus&&(g("success"),e.appbodyloading("none"))}},s.onerror=function(){alert("Too Slow connection!!\n try with smaller size Photo"),e.appbodyloading("none"),g("otp")},s.setRequestHeader("otp",n.value),s.setRequestHeader("email",j.current.email),s.send()}),[j]),O=Object(s.useContext)(Ee);Object(s.useEffect)((function(){"Dark"===O?(i.current.username?i.current.username.style.color="white":console.log(),i.current.email?i.current.email.style.color="white":console.log(),i.current.password?i.current.password.style.color="white":console.log(),i.current.otp_input?i.current.otp_input.style.color="white":console.log()):(i.current.username?i.current.username.style.color="black":console.log(),i.current.email?i.current.email.style.color="black":console.log(),i.current.password?i.current.password.style.color="black":console.log(),i.current.otp_input?i.current.otp_input.style.color="black":console.log())}),[O,i,b]);var x=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{className:"signup_heading",ref:function(e){return i.current.signup_heading=e},children:"Sign Up"}),Object(y.jsxs)("form",{action:"javascript:void(0);",onSubmit:function(t){return function(t){var n=new XMLHttpRequest;e.appbodyloading("flex"),n.onreadystatechange=function(){if(console.log(n.status,n.readyState),200===n.status&&4===n.readyState){var t=JSON.parse(n.response);console.log(t),"exists"===t.status?(i.current.email.focus(),i.current.email.setCustomValidity("This Email Exists!!!"),i.current.email.reportValidity(),e.appbodyloading("none")):"otp"===t.status?(g("otp"),i.current.otp_input.style.backgroundImage="url(".concat(R,")"),e.appbodyloading("none")):"fail"===t.status&&(g("error"),e.appbodyloading("none"))}},n.open("POST",p+"backend_api/signup");var s=document.getElementById("progressbar");n.upload.addEventListener("progress",(function(e){var t=Math.round(e.loaded/e.total*100);s.style.width="".concat(t,"%"),s.innerText="Image ".concat(t,"%")})),n.upload.onloadend=function(){s.style.width="".concat(0,"%"),s.innerText=""};var a=t.target;j.current.username=a[0].value,j.current.email=a[1].value,j.current.password=a[2].value,n.setRequestHeader("userData",JSON.stringify(j.current));var o=new FormData,r=a[4].files[0];console.log(r),o.append("image",r),r?n.send(o):n.send()}(t)},children:[Object(y.jsx)("input",{required:!0,type:"text",placeholder:"Username",className:"signup_username",ref:function(e){return i.current.username=e},maxLength:100,onInput:function(e){return function(e){e.preventDefault();var n=Object(f.a)(e.target.value).filter((function(e){return!(e in t)})),s=Object(f.a)(e.target.value);n.join("")==s.join("")?e.target.setCustomValidity(""):'"'===e.nativeEvent.data||"'"===e.nativeEvent.data?e.target.value=e.target.value.slice(0,e.target.value.length-1):e.nativeEvent.data in t&&(e.target.setCustomValidity("username should not contain \n ------------ ?!:;\"'#$%^&*() ------------"),e.target.reportValidity())}(e)}}),Object(y.jsx)("input",{required:!0,type:"email",placeholder:"Email",className:"signup_email",ref:function(e){return i.current.email=e},maxLength:100,onInput:function(e){return n(e)}}),Object(y.jsx)("input",{required:!0,type:"password",placeholder:"Password",className:"signup_password",ref:function(e){return i.current.password=e},minLength:8,onInput:function(e){return n(e)}}),Object(y.jsx)("input",{type:"submit",id:"signup_submit",value:"Sign Up"}),Object(y.jsxs)("div",{className:"upload_image",ref:function(e){return i.current.image=e},children:[Object(y.jsx)("input",{type:"file",id:"file_input",ref:function(e){return i.current.image_input=e},accept:"image/*"}),Object(y.jsx)("label",{htmlFor:"file_input",id:"file_input_label",ref:function(e){return i.current.image_percent=e},onClick:function(){return a=setInterval(m,2e3)},children:"100%"})]})]})]}),_=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{className:"signup_heading",ref:function(e){return i.current.signup_heading=e},align:"center",style:{color:"rgb(24, 151, 201)"},children:"OTP"}),Object(y.jsxs)("form",{action:"javascript:void(0);",onSubmit:function(e){g("otp"),h(e)},children:[Object(y.jsx)("input",{required:!0,type:"number",ref:function(e){return i.current.otp_input=e},className:"signup_password",onInput:function(e){e.target.value.length>4?e.target.setCustomValidity("No More than 4 Digits"):e.target.setCustomValidity(""),e.target.reportValidity()},style:{gridColumn:"1 / span 2",gridRow:"1 / span 2",marginRight:"20px",marginLeft:"20px",fontSize:"30px",letterSpacing:"32px",color:"#0334dd"}}),Object(y.jsxs)("ul",{className:"instList",children:[Object(y.jsx)("li",{children:"Check Email for OTP"}),Object(y.jsx)("li",{children:"Must have 4 digits"}),Object(y.jsx)("li",{children:"Email is identity"})]}),Object(y.jsx)("input",{type:"submit",id:"signup_submit"})]})]}),w=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h2",{className:"signup_heading",ref:function(e){return i.current.signup_heading=e},align:"center",style:{color:"rgb(24, 151, 201)"},children:"Error Occured!!"}),Object(y.jsx)("button",{id:"signup_submit",onClick:function(){g("form"),setTimeout((function(){return c()}),500)},style:{justifySelf:"center",gridColumn:"1/span 2",cursor:"pointer"},children:"Back"})]}),k=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h3",{ref:function(e){return i.current.signup_heading=e},style:{color:"rgb(24, 151, 201)",gridColumn:"1/ span 2"},align:"center",children:"\ud83c\udf89Welcome\ud83c\udf89"}),Object(y.jsx)("button",{id:"signup_submit",style:{justifySelf:"center",gridColumn:"1/span 2",cursor:"pointer"},children:Object(y.jsx)(l.Link,{style:{textDecoration:"none"},to:"/Login",children:Object(y.jsx)("span",{children:"Login"})})})]});return Object(y.jsxs)("div",{className:"signup",children:[Object(y.jsxs)("div",{className:"signup_form",ref:function(e){return i.current.signup_form=e},children:["form"===b?x:null,"otp"===b?_:null,"error"===b?w:null,"success"===b?k:null]}),Object(y.jsx)("div",{className:"progress signup_heading",id:"progressbar"})]})},K=(n(92),function(e){var t=Object(s.useState)(e.loading),n=Object(r.a)(t,2),i=n[0],a=n[1];return Object(s.useEffect)((function(){a(e.loading)}),[e.loading]),Object(y.jsx)("div",{className:"loading",style:{display:i,pointerEvents:"all"},children:Object(y.jsxs)("div",{className:"logoanime",children:[Object(y.jsx)("h1",{style:{color:"white"},align:"center",children:"Depends on Internet Speed"}),Object(y.jsx)("img",{src:m,id:"loadinglogo"}),Object(y.jsxs)("div",{className:"loadinganime",children:[Object(y.jsx)("div",{className:"dots",style:{"--i":1}}),Object(y.jsx)("div",{className:"dots",style:{"--i":2}}),Object(y.jsx)("div",{className:"dots",style:{"--i":3}})]})]})})}),Q=(n(93),n(94),n.p+"static/media/preview.7f131431.svg"),Z=n.p+"static/media/join_datetime.db759caf.svg",ee=n.p+"static/media/comments.df0b94e9.svg",te=(n(95),n(57),n.p+"static/media/like.0158967f.svg"),ne=n.p+"static/media/dislike.4f7ca86c.svg",se=n.p+"static/media/steps_bg.8981b12b.svg",ie=function(e){var t=window.matchMedia("(max-width:768px)"),n=Object(s.useState)(!1),i=Object(r.a)(n,2),a=i[0],o=i[1];function c(){t.matches?o(!0):o(!1)}return Object(s.useEffect)((function(){return c(),window.addEventListener("resize",c,!0),function(){return window.removeEventListener("resize",c,!0)}}),[]),Object(y.jsx)("div",{className:"homepage",children:e.blogs_list.map((function(e){return Object(y.jsx)(ae,{mini:a,user_details:e.user_details,views:e.blog_details.views,likes:e.blog_details.likes,dislikes:e.blog_details.dislikes,date:e.blog_details.datetime,title:e.blog_details.title,discription:e.blog_details.discription,image_url:e.blog_details.blog_title_image,blog_id:e.blog_details.blog_id},e.blog_details.blog_id)}))})},ae=function(e){var t=Object(s.useState)({blog_details:{gridTemplateColumns:"minmax(40%, 350px) minmax(calc(60% - 15px), auto)",gridTemplateRows:"60px 170px 50px",gridGap:"10px",gridTemplateAreas:'"image blogger" "image head_dis" "image public"',maxWidth:"1000px",width:"90%",backgroundImage:"url(".concat(se,")")},title_image:{width:"90%",margin:"0 10px",border:"2px solid #cca200"}}),n=Object(r.a)(t,2),i=n[0],a=n[1];return Object(s.useEffect)((function(){e.mini?a({blog_details:{gridTemplateColumns:"100%",gridTemplateAreas:'"image" "blogger" "head_dis" "public"',width:"95%",maxWidth:"400px",gridGap:"0",gridTemplateRows:"minmax(200px,auto) 60px 170px 50px",backgroundImage:"url(".concat(se,")")},title_image:{width:"100%",margin:"0",border:"none"}}):a({blog_details:{gridTemplateColumns:"minmax(40%, 350px) minmax(calc(60% - 15px), auto)",gridTemplateAreas:'"image blogger" "image head_dis" "image public"',gridTemplateRows:"60px 170px 50px",gridGap:"10px",width:"90%",maxWidth:"1000px",backgroundImage:"url(".concat(se,")")},title_image:{width:"90%",margin:"0 10px",border:"2px solid #cca200"}})}),[e.mini]),Object(y.jsx)(l.Link,{to:"/Blog/".concat(e.title,"?id=").concat(e.blog_id),style:{display:"flex",width:"100%",placeItems:"center"},children:Object(y.jsxs)("div",{className:"blog_details",style:i.blog_details,children:[Object(y.jsx)("img",{className:"blog_image",style:i.title_image,src:e.image_url,loading:"lazy"}),Object(y.jsxs)("div",{className:"blogger",children:[Object(y.jsx)(w,{user_id:e.user_details.user_id,width:"35px",height:"35px",style:{borderWidth:"2px"},to:"/Profile/".concat(e.user_details.user_id),onClick:function(){return null}}),Object(y.jsx)("span",{id:"username",children:e.user_details.username}),Object(y.jsx)(Ne,{user_id:e.user_details.user_id,style:{marginLeft:"auto",marginRight:"10px",height:"30px",alignSelf:"center"}})]}),Object(y.jsxs)("span",{className:"head_dis",children:[Object(y.jsx)("h4",{children:e.title}),Object(y.jsx)("p",{children:""!==e.discription?e.discription:"No Discription"})]}),Object(y.jsxs)("span",{className:"public_details",children:[Object(y.jsx)("span",{id:"like_label",style:{backgroundImage:"url(".concat(te,")")},children:e.likes?e.likes:"No likes"}),Object(y.jsx)("span",{id:"view_label",style:{backgroundImage:"url(".concat(Q,")")},children:e.views?e.views:"No views"}),Object(y.jsx)("span",{id:"dislike_label",style:{backgroundImage:"url(".concat(ne,")")},children:e.dislikes?e.dislikes:"No dislikes"}),Object(y.jsx)("span",{className:"datetime",children:e.date})]})]})})},oe=(n(58),n.p+"static/media/editor.1bd8623b.svg"),re=n.p+"static/media/youtubeLogo.6ca8061c.svg",ce=n.p+"static/media/twitter.0bac7e4a.svg",le=n.p+"static/media/popComp.d8ef3bd8.svg",ue={},de=function(e){var t=Object(s.useContext)(Ie),n=Object(c.k)(),i=Object(s.useRef)({}),a=Object(s.useState)("blog"),o=Object(r.a)(a,2),l=o[0],d=o[1],g=Object(s.useCallback)((function(e){var t=b()("#label_image");if(e.target.files!=[]){var n=e.target.files[0],s=URL.createObjectURL(n);b()("#image_span").css({backgroundImage:"url(".concat(s,")"),backgroundSize:"contain",backgroundPosition:"center",backdropFilter:"blur(3px)",borderRadius:"20px"}),t.css({backgroundImage:"url(".concat(s,")")}),ue.blog_title_image=n}else t.css({borderRadius:"20px",backgroundSize:"cover",boxShadow:"0px 1px 7px 3px #1976d2"})}),[]),p=Object(s.useCallback)((function(e){e.preventDefault(),ue.title=i.current.blog_title.value,ue.discription=i.current.blog_discription.value,d("blog_editor"),n.push("/UploadBlog/editor")})),j=Object(s.useContext)(Ee);Object(s.useEffect)((function(){"Dark"===j?(i.current.blog_title.style.color="white",i.current.blog_discription.style.color="white"):(i.current.blog_title.style.color="black",i.current.blog_discription.style.color="black")}),[j,i]);var f=Object(s.useMemo)((function(){return Object(y.jsx)("form",{className:"blog_info",action:"javascript:void(0);",onSubmit:function(e){return p(e)},children:Object(y.jsxs)("div",{className:"blog_info_child",children:[Object(y.jsx)("h1",{align:"center",children:"Blog Information "}),Object(y.jsx)("label",{htmlFor:"blog_title",id:"label_title",children:"Title"}),Object(y.jsx)("input",{type:"text",autoFocus:!0,placeholder:"Title",autoComplete:"off",spellCheck:"true",autoCapitalize:"words",id:"blog_title",maxLength:100,ref:function(e){return i.current.blog_title=e},required:!0}),Object(y.jsx)("label",{htmlFor:"blog_discription",id:"label_discription",children:"Discription"}),Object(y.jsx)("textarea",{type:"text",autoComplete:"off",spellCheck:"true",autoCapitalize:"sentences",id:"blog_discription",placeholder:"Discription",maxLength:200,ref:function(e){return i.current.blog_discription=e}}),Object(y.jsx)("span",{id:"span_label",style:{gridArea:"image",alignSelf:"center",justifySelf:"center",display:"grid"},children:Object(y.jsx)("label",{htmlFor:"blog_image",id:"label_image",children:Object(y.jsx)("span",{id:"image_span"})})}),Object(y.jsx)("input",{type:"file",id:"blog_image",accept:"image/*",onChange:g,hidden:!0}),Object(y.jsx)("input",{type:"submit",value:"Next",id:"submit"})]})})}),[l,g,p]),m=Object(s.useState)("editor"),h=Object(r.a)(m,2),O=h[0],x=h[1],v=function(e){x(e.target.value)};Object(s.useEffect)((function(){"editor"===O?(n.push("/UploadBlog/editor"),x("editor")):"preview"===O&&(n.push("/UploadBlog/preview"),x("preview"))}),[O]);var _=Object(s.useState)([]),w=Object(r.a)(_,2),k=w[0],S=w[1],C=Object(s.useCallback)((function(e){return S(e)})),N=Object(s.useMemo)((function(){return Object(y.jsxs)("div",{className:"editor",children:[Object(y.jsx)(pe,{change_state:v,editor_state:O}),Object(y.jsxs)(u.CacheSwitch,{children:[Object(y.jsx)(u.CacheRoute,{exact:!0,path:"/UploadBlog/editor",children:Object(y.jsx)(je,{appbodyloading:function(t){return e.appbodyloading(t)},blog:C})}),Object(y.jsx)(u.CacheRoute,{exact:!0,path:"/UploadBlog/preview",children:Object(y.jsx)(be,{list:k,appbodyloading:function(t){return e.appbodyloading(t)}})})]})]})}));return Object(s.useEffect)((function(){if(ue.blog_title_image="",!Boolean(t)||!Boolean(sessionStorage.session))return n.push("/Login"),null}),[t,sessionStorage]),Object(s.useEffect)((function(){return window.onbeforeunload=function(e){return console.log(e),"Changes will not be saved!!!"},function(){return window.onbeforeunload=function(e){return null}}}),[]),Object(y.jsxs)("div",{className:"blog_upload_page",children:["blog"===l?f:null,"blog_editor"===l?N:null]})},be=function(e){var t=Object(c.k)(),n=Object(s.useState)([]),i=Object(r.a)(n,2),a=i[0],o=i[1],l=Object(s.useContext)(Ie);return Object(s.useEffect)((function(){if(e.list&&sessionStorage.session===l&&Boolean(sessionStorage.session)&&Boolean(l)){console.log(e.list),e.appbodyloading("flex");var n=new XMLHttpRequest;n.open("POST",v.origin+"backend_api/blogPreview"),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var s=JSON.parse(n.response);switch(s.status){case"success":o(s.hydratedBlog),console.log("data_list:",a),e.appbodyloading("none");break;case"loginRequired":t.push("/Login"),console.log("backend_api/blogPreview",s),k(),e.appbodyloading("none");break;default:console.log(s.status),e.appbodyloading("none")}}},n.setRequestHeader("session",l),n.setRequestHeader("contentType","application/json;charset=utf-8");var s=new FormData;s.append("blog",JSON.stringify(e.list)),n.send(s)}}),[e.list,l]),Object(y.jsx)("div",{className:"showpreview",children:Object(y.jsx)(ge,{children:a.map((function(e){return Object(y.jsx)("div",{className:"container_data",dangerouslySetInnerHTML:{__html:e}})}))})})},ge=function(e){return Object(y.jsx)("div",{className:"blog_preview",children:e.children})},pe=function(e){var t=Object(s.useRef)({});Object(s.useEffect)((function(){t.current[e.editor_state].click()}),[e.editor_state]);var n=Object(c.n)(),i=n.path;n.url;return Object(s.useEffect)((function(){"/UploadBlog/editor"===i?e.change_state("editor"):"/UploadBlog/preview"===i&&e.change_state("preview")}),[]),Object(y.jsxs)("div",{className:"tabs",children:[Object(y.jsx)("input",{ref:function(e){return t.current.editor=e},type:"radio",name:"tabs",id:"editer_radio",value:"editor",onInput:function(t){return e.change_state(t)},hidden:!0,defaultChecked:!0}),Object(y.jsxs)("label",{htmlFor:"editer_radio",id:"label_editor",children:[Object(y.jsx)("img",{src:oe,className:"label_ico"}),"Editor"]}),Object(y.jsx)("input",{ref:function(e){return t.current.preview=e},type:"radio",name:"tabs",id:"preview_radio",value:"preview",onInput:function(t){return e.change_state(t)},hidden:!0}),Object(y.jsxs)("label",{htmlFor:"preview_radio",id:"label_preview",children:[Object(y.jsx)("img",{src:Q,className:"label_ico"}),"Preview"]})]})},je=function(e){var t=Object(s.useRef)({}),n=Object(s.useState)(!0),i=Object(r.a)(n,2),a=i[0],o=i[1],l=window.matchMedia("(max-width : 767px)"),u=Object(s.useCallback)((function(){var e=t.current.components.style.display;l.matches?t.current.components.style.display="none"===e||""===e?"flex":"":t.current.components.style.display="flex"}),[l]),d=Object(s.useState)("Heading"),b=Object(r.a)(d,2),g=b[0],p=b[1];function j(e){p(e.target.value),t.current.maintext.focus()}Object(s.useEffect)((function(){var e;switch(t.current.maintext.innerHTML="","Photo"===g||"Video"===g||"Youtube Video"===g?(o(!1),t.current.maintext.classList.remove("bullet_list")):"List"===g?(o(!0),t.current.maintext.classList.add("bullet_list")):(o(!0),t.current.maintext.classList.remove("bullet_list")),g){case"Video":e='<input type= "file" accept ="video/*" id = "videofile" hidden  required />\n                           <label  for = "videofile">Video</label> ',o(!1);break;case"Photo":e='<input type= "file" accept ="image/*" id = "photofile" hidden required />\n                           <label  for = "photofile">Photo</label> ',o(!1);break;case"Youtube Video":e=' <label  for = "videolink" style = "border:none;padding:0;">video Link</label> \n                            <input  style="    height: 20px;\n                            width: 90%;\n                            margin: 0;\n                            place-self: center;\n                            padding: 0;\n                            border-color: blueviolet;\n                            border-radius: 5px"  type= "url" id = "videolink" required  />',o(!1);break;case"Instagram Post":e=' <label  for = "instalink" style = "border:none;padding:0;">Post Link</label> \n                <input  style="    height: 20px;\n                width: 90%;\n                margin: 0;\n                place-self: center;\n                padding: 0;\n                border-color: blueviolet;\n                border-radius: 5px"  type= "url" id = "instalink" required  />',o(!1);break;case"Tweet":e=' <label  for = "tweetlink" style = "border:none;padding:0;">Post Link</label> \n                <input  style="    height: 20px;\n                width: 90%;\n                margin: 0;\n                place-self: center;\n                padding: 0;\n                border-color: blueviolet;\n                border-radius: 5px"  type= "url" id = "tweetlink" required  />',o(!1);break;default:e="",o(!0)}t.current.maintext.innerHTML=e}),[g]);var m=Object(s.useState)([]),h=Object(r.a)(m,2),O=h[0],x=h[1];Object(s.useEffect)((function(){return e.blog([])}),[]);var _=Object(s.useContext)(Ie),w=Object(c.k)(),k=Object(s.useCallback)((function(){if(ue.blog=O,console.log(ue),e.appbodyloading("flex"),_===sessionStorage.session&&(Boolean(sessionStorage.session)||Boolean(_))){var t=JSON.parse(sessionStorage.login_data),n=new XMLHttpRequest,s=JSON.stringify(ue);n.open("POST","".concat(v.origin,"backend_api/uploadBlog")),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var t=JSON.parse(n.response);switch(t.status){case"loginRequired":w.push("/Login"),e.appbodyloading("none");break;case"fail":w.push("/Error"),e.appbodyloading("none");break;case"success":w.push("/Home"),e.appbodyloading("none");break;default:console.log(t.status)}}},n.onerror=function(){alert("Connection Too Slow!!! /n or Try less video and photos /n Hint:Use Youtube for videos!!"),e.appbodyloading("none")};for(var i=new FormData,a=0;a<ue.blog.length;a++){var o=ue.blog[a];o.Photo?i.append(o.name,o.Photo):o.Video&&i.append(o.name,o.Video)}ue.blog_title_image&&i.append("blog_title_image",ue.blog_title_image),n.setRequestHeader("session",_),n.setRequestHeader("logindata",t),i.append("blogDetails",s),n.send(i)}}),[O,_]);function S(t){var n=O;n.splice(t,1),console.log("b-",n),x(Object(f.a)(n)),e.blog(Object(f.a)(n))}return Object(s.useEffect)((function(){t.current.editing.scrollTo(0,t.current.editing.scrollHeight)}),[O]),Object(y.jsxs)("div",{className:"editing_pane",children:[Object(y.jsxs)("div",{className:"editing",ref:function(e){return t.current.editing=e},children:[Object(y.jsx)("button",{className:"upload",onClick:k,children:"Upload"}),Object(y.jsx)("button",{className:"addComponents",onClick:u}),O.map((function(e,t,n){return Object(y.jsx)(fe,{data:e,index:t,arr:n,rm:S},t)}))]}),Object(y.jsxs)("div",{className:"components",ref:function(e){return t.current.components=e},children:[Object(y.jsx)("h6",{align:"center",className:"heading",children:"Components"}),Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"auto"},children:[Object(y.jsx)("input",{onClickCapture:function(e){return j(e)},name:"comp",hidden:!0,checked:"Heading"===g,type:"radio",value:"Heading",id:"Heading",defaultChecked:!0}),Object(y.jsx)("label",{className:"complist",htmlFor:"Heading",children:"Heading"}),Object(y.jsx)("input",{onClickCapture:function(e){return j(e)},name:"comp",hidden:!0,checked:"Paragraph"===g,type:"radio",value:"Paragraph",id:"Paragraph"}),Object(y.jsx)("label",{className:"complist",htmlFor:"Paragraph",children:"Paragraph"}),Object(y.jsx)("input",{onClickCapture:function(e){return j(e)},name:"comp",hidden:!0,checked:"List"===g,type:"radio",value:"List",id:"List"}),Object(y.jsx)("label",{className:"complist",htmlFor:"List",children:"List"}),Object(y.jsx)("input",{onClickCapture:function(e){return j(e)},name:"comp",hidden:!0,checked:"Photo"===g,type:"radio",value:"Photo",id:"Photo"}),Object(y.jsx)("label",{className:"complist",htmlFor:"Photo",children:"Photo"}),Object(y.jsx)("input",{onClickCapture:function(e){return j(e)},name:"comp",hidden:!0,checked:"Video"===g,type:"radio",value:"Video",id:"Video"}),Object(y.jsx)("label",{className:"complist",htmlFor:"Video",children:"Video"}),Object(y.jsx)("input",{onClickCapture:function(e){return j(e)},name:"comp",hidden:!0,checked:"Youtube Video"===g,type:"radio",value:"Youtube Video",id:"Youtube Video"}),Object(y.jsxs)("label",{className:"complist",htmlFor:"Youtube Video",children:[Object(y.jsx)("img",{src:re,width:30,height:30,style:{verticalAlign:"middle"}}),"Youtube Video"]}),Object(y.jsx)("input",{onClickCapture:function(e){return j(e)},name:"comp",hidden:!0,checked:"Instagram Post"===g,type:"radio",value:"Instagram Post",id:"Instagram Post"}),Object(y.jsxs)("label",{className:"complist",htmlFor:"Instagram Post",children:[Object(y.jsx)("img",{src:M,width:30,height:30,style:{verticalAlign:"middle"}})," Insta Post"]}),Object(y.jsx)("input",{onClickCapture:function(e){return j(e)},name:"comp",hidden:!0,checked:"Tweet"===g,type:"radio",value:"Tweet",id:"Tweet"}),Object(y.jsxs)("label",{className:"complist",htmlFor:"Tweet",children:[Object(y.jsx)("img",{src:ce,width:30,height:30,style:{verticalAlign:"middle"}})," Tweet"]})]})]}),Object(y.jsxs)("form",{action:"javascript:void(0);",id:"text_input",ref:function(e){return t.current.text_input=e},cols:"30",rows:"10",onSubmit:function(n){return function(n){if(n.preventDefault(),n.nativeEvent.stopImmediatePropagation(),"Heading"===g){var s=t.current.maintext.innerText;x([].concat(Object(f.a)(O),[{Heading:s}])),e.blog([].concat(Object(f.a)(O),[{Heading:s}])),t.current.maintext.innerText=""}else if("Paragraph"===g){var i=t.current.maintext.innerText;x([].concat(Object(f.a)(O),[{Paragraph:i}])),e.blog([].concat(Object(f.a)(O),[{Paragraph:i}])),t.current.maintext.innerText=""}else if("List"===g){var a=t.current.maintext.innerText;a=a.split("\n").filter((function(e){return e||null})),x([].concat(Object(f.a)(O),[{List:a}])),e.blog([].concat(Object(f.a)(O),[{List:a}])),t.current.maintext.innerText=""}else if("Photo"===g){var o=n.target[0].files[0];o.size>=10485760?(alert("**File size must be under 10MB**"),n.target[0].setCustomValidity("Choose another Photo"),n.target[0].files.value=""):(x([].concat(Object(f.a)(O),[{Photo:o,name:o.name}])),e.blog([].concat(Object(f.a)(O),[{Photo:o,name:o.name}])))}else if("Video"===g){var r=n.target[0].files[0];r.size>=10485760?(alert("**File size must be under 10MB**"),n.target[0].setCustomValidity("Choose another Video"),n.target[0].files.value=""):(x([].concat(Object(f.a)(O),[{Video:r,name:r.name}])),e.blog([].concat(Object(f.a)(O),[{Video:r,name:r.name}])))}else if("Youtube Video"===g){var c=n.target[0].value.split("?")[0].split("/").filter((function(e){return e||null})),l=c[c.length-1].split("="),u=l[l.length-1];x([].concat(Object(f.a)(O),[{"Youtube Video":u}])),e.blog([].concat(Object(f.a)(O),[{"Youtube Video":u}])),n.target[0].value=""}else if("Instagram Post"===g){var d=n.target[0].value.split("?")[0].split("/").filter((function(e){return e||null})),b=d[d.length-1];x([].concat(Object(f.a)(O),[{"Instagram Post":b}])),e.blog([].concat(Object(f.a)(O),[{"Instagram Post":b}])),n.target[0].value=""}else if("Tweet"===g){var p=n.target[0].value.split("?")[0];x([].concat(Object(f.a)(O),[{Tweet:p}])),e.blog([].concat(Object(f.a)(O),[{Tweet:p}])),n.target[0].value=""}ue.blog=O}(n)},children:[Object(y.jsx)("span",{ref:function(e){return t.current.comp_tag=e},contentEditable:"false",className:"comp_tag",children:g}),Object(y.jsx)("div",{ref:function(e){return t.current.maintext=e},className:"maintext",contentEditable:a}),Object(y.jsx)("input",{type:"submit",className:"insert_comp",ref:function(e){return t.current.insert_comp=e},value:""})]})]})},fe=function(e){var t,n=String(Object.keys(e.data)[0]);if("Heading"===n)t=Object(y.jsx)("p",{className:"h5",children:e.data[n]});else if("Paragraph"===n)t=Object(y.jsx)("p",{children:"".concat(e.data[n])});else if("List"===n)t=Object(y.jsx)("ul",{children:e.data[n].map((function(e){return Object(y.jsx)("li",{children:e})}))});else if("Photo"===n){var s=URL.createObjectURL(e.data[n]);t=Object(y.jsx)("img",{src:s,height:200,width:400,style:{boxShadow:"rgb(0 0 0 / 20%) 0px 0px 5px 3px",borderRadius:"5px",maxWidth:"95%",justifySelf:"center"}})}else if("Video"===n){var i=URL.createObjectURL(e.data[n]);t=Object(y.jsx)("video",{src:i,controls:!0,style:{boxShadow:"rgb(0 0 0 / 20%) 0px 0px 5px 3px",borderRadius:"5px",maxWidth:"95%",justifySelf:"center",zIndex:"-1"}})}else"Youtube Video"===n?t=Object(y.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(e.data[n]),title:"YouTube video player",frameborder:"0",style:{boxShadow:"rgb(0 0 0 / 20%) 0px 0px 5px 3px",width:"auto",height:"auto",borderRadius:"5px",justifySelf:"center"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}):"Instagram Post"===n?t=Object(y.jsx)("iframe",{src:"https://www.instagram.com/p/".concat(e.data[n],"/embed?utm_source=ig_web_copy_linkembed"),title:"Instagram Post",style:{boxShadow:"rgb(0 0 0 / 20%) 0px 0px 5px 3px",width:"100%",maxWidth:"500px",minWidth:"250px",height:"80vh",maxHeight:"700px",borderRadius:"5px",justifySelf:"center"},height:"600",frameborder:"0",scrolling:"yes",allowtransparency:"true"}):"Tweet"===n&&(t=Object(y.jsx)("iframe",{src:"https://twitframe.com/show?url=".concat(e.data[n]),title:"Instagram Post",style:{boxShadow:"rgb(0 0 0 / 20%) 0px 0px 5px 3px",width:"100%",maxWidth:"500px",minWidth:"250px",height:"70vh",borderRadius:"5px",justifySelf:"center"},height:"600",frameborder:"0",scrolling:"yes",allowtransparency:"true"}));return Object(y.jsxs)("div",{className:"container_part",children:[Object(y.jsx)("h5",{children:"".concat(n)}),Object(y.jsx)("img",{src:le,width:20,height:20,onClick:function(){return e.rm(e.index)},style:{gridArea:"img",alignSelf:"center",justifySelf:"center"}}),Object(y.jsx)("span",{className:"container_data",children:t})]})},me=n(72),he=(n(96),n(75)),Oe=n.n(he),xe=function(e){var t=window.location.hash.split("?")[1].split("=")[1],n=Object(c.k)();null===t&&n.push("/Error");var i=Object(s.useState)([]),a=Object(r.a)(i,2),o=a[0],l=a[1],u=Object(s.useState)({likes:"",dislikes:"",views:"",title:"",image_url:"",discription:"",blogger_details:{}}),d=Object(r.a)(u,2),b=d[0],g=d[1],p=Object(s.useRef)({});return Object(s.useEffect)((function(){var e=new XMLHttpRequest;e.open("GET",v.origin+"backend_api/getBlog?blog_id="+t),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var t=JSON.parse(e.response);switch(t.status){case"success":l(t.blog),g({likes:t.likes,dislikes:t.dislikes,views:t.views,title:t.title,image_url:t.image_url,blogger_details:t.blogger_details});break;case"page_not_found":case"fail":n.push("/Error")}}},e.send()}),[t,n]),Object(s.useEffect)((function(){document.getElementsByClassName("appbody")[0].scrollTo(0,0)}),[b]),Object(y.jsxs)("div",{className:"blog_page",ref:function(e){return p.current.blog_page=e},children:[Object(y.jsxs)(me.a,{children:[Object(y.jsx)("title",{children:b.title}),Object(y.jsx)("meta",{name:"Description",content:b.discription})]}),Object(y.jsx)("h2",{align:"center",children:b.title}),Object(y.jsx)("img",{src:b.image_url,alt:"title",className:"title_image",loading:"eager"}),Object(y.jsx)(Re,{user_details:b.blogger_details,onClick:function(){return null},to:"/Profile/".concat(b.blogger_details.user_id)}),Object(y.jsx)(ge,{children:o.map((function(e,t){return Object(y.jsx)(ve,{index:t,data:e},t)}))}),Object(y.jsx)(_e,{blog_id:t,likes:b.likes,dislikes:b.dislikes,views:b.views}),Object(y.jsx)(ye,{blog_id:t,appbodyloading:e.appbodyloading})]})},ve=function(e){var t=Object(s.useRef)();return Object(s.useEffect)((function(){var n=Oe.a.sanitize(e.data,{ADD_TAGS:["iframe"],ADD_ATTR:["allow","allowfullscreen","frameborder","scrolling"]});t.current.innerHTML=n}),[t,e.data]),Object(y.jsx)("div",{ref:function(e){return t.current=e},id:"datacontainer".concat(e.index),className:"container_data"})},_e=function(e){var t=Object(s.useContext)(Ie),n=Object(c.k)(),i=Object(s.useState)("not yet"),a=Object(r.a)(i,2),o=a[0],l=a[1],u=Object(s.useState)({likes:e.likes,dislikes:e.dislikes,views:e.views}),d=Object(r.a)(u,2),b=d[0],g=d[1],p=Object(s.useRef)({});Object(s.useEffect)((function(){g({likes:e.likes,dislikes:e.dislikes,views:e.views})}),[e.likes,e.dislikes,e.views]);var f=Object(s.useCallback)((function(s){var i=s.target.value;if(t===sessionStorage.session){var a=new XMLHttpRequest,o=JSON.parse(sessionStorage.login_data).user_id;a.open("POST",v.origin+"backend_api/Blogreview"),a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var e=JSON.parse(a.response);"success"===e.status&&g(Object(j.a)({},e.details))}};var r=new FormData;r.append("uid",o),r.append("bid",e.blog_id),r.append("review",i),a.send(r)}else n.push("/Error")}),[t,e.blog_id,n]);return Object(s.useEffect)((function(){if(t===sessionStorage.session&&Boolean(t)&&Boolean(sessionStorage.session)){var n=new XMLHttpRequest,s=JSON.parse(sessionStorage.login_data).user_id;n.open("GET",v.origin+"backend_api/checkReviewr?bid=".concat(e.blog_id,"&uid=").concat(s)),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var e=JSON.parse(n.response);"success"===e.status&&l(e.isreviewer)}},n.send()}}),[t,e.blog_id]),Object(s.useEffect)((function(){"like"===o?p.current.like.click():"dislike"===o&&p.current.dislike.click()}),[o]),Object(y.jsxs)("div",{className:"review",children:[Object(y.jsx)("input",{type:"radio",name:"review",ref:function(e){return p.current.like=e},id:"like",value:"like",onInput:function(e){return f(e)},disabled:!t,hidden:!0}),Object(y.jsx)("label",{htmlFor:"like",id:"like_label",style:{backgroundImage:"url(".concat(te,")")},children:b.likes>0?b.likes:"No Likes"}),Object(y.jsx)("label",{id:"view_label",style:{backgroundImage:"url(".concat(Q,")")},children:b.views>0?b.views:"No Views"}),Object(y.jsx)("input",{type:"radio",name:"review",ref:function(e){return p.current.dislike=e},id:"dislike",value:"dislike",onInput:function(e){return f(e)},disabled:!t,hidden:!0}),Object(y.jsx)("label",{htmlFor:"dislike",id:"dislike_label",style:{backgroundImage:"url(".concat(ne,")")},children:b.dislikes>0?b.dislikes:"No Dislikes"})]})},ye=function(e){var t=Object(s.useContext)(Ie),n=Object(s.useRef)({}),i=Object(s.useState)(!1),a=Object(r.a)(i,2),o=a[0],l=a[1],u=Object(c.k)();Object(s.useEffect)((function(){t===sessionStorage.session&&Boolean(t)&&Boolean(sessionStorage.session)?l(!0):l(!1)}),[t]);var d=Object(s.useState)([]),b=Object(r.a)(d,2),g=b[0],p=b[1],j=Object(s.useCallback)((function(){var t=new XMLHttpRequest;t.open("POST",v.origin+"backend_api/getComments"),t.onreadystatechange=function(){if(200===t.status&&4===t.readyState){var e=JSON.parse(t.response);switch(e.status){case"success":p(e.comment_list);break;case"loginRequired":console.log("backend_api/getComments"),k(),u.push("/Login");break;default:console.log(e.status)}}};var n=new FormData;n.append("blog_id",e.blog_id),t.send(n)}),[g,n,u,e.blog_id]);Object(s.useEffect)((function(){j()}),[e.blog_id]),Object(s.useEffect)((function(){return n.current.comment_list.scrollTo(0,0)}),[g,n]);var f=Object(s.useCallback)((function(){var s=n.current.comment_input.value;if(t===sessionStorage.session&&""!==s){var i=new XMLHttpRequest;i.open("POST",v.origin+"backend_api/uploadComment"),e.appbodyloading("flex"),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var t=JSON.parse(i.response);switch(n.current.comment_input.value="",t.status){case"success":console.log(t),j(),e.appbodyloading("none");break;case"loginRequired":console.log(t.status),k(),u.push("/Login"),e.appbodyloading("none");break;case"fail":console.log(t.status),u.push("/Error"),e.appbodyloading("none");break;default:console.log(t.status),e.appbodyloading("none")}}};var a=new FormData;i.setRequestHeader("session",t),a.append("comment",s),a.append("user_id",JSON.parse(sessionStorage.login_data).user_id),a.append("blog_id",e.blog_id),i.send(a)}}),[t,n,e]),m=Object(s.useMemo)((function(){return g.map((function(e){return Object(y.jsx)(we,{c_detials:e,id:e.cid},e.cid)}))})),h=Object(s.useMemo)((function(){return Object(y.jsx)("span",{style:{display:"grid",placeItems:"center",fontSize:"30px",width:"100%",height:"100%"},id:"no_comments",children:"No Comments\ud83d\ude05"})}));return Object(y.jsxs)("div",{className:"comments",children:[Object(y.jsx)("h5",{align:"center",children:"Comments"}),Object(y.jsxs)("div",{className:"cover",children:[Object(y.jsx)("textarea",{name:"comment",maxLength:1e3,id:"comment_input",disabled:!o,ref:function(e){return n.current.comment_input=e},cols:"3",rows:"5"}),Object(y.jsx)("button",{ref:function(e){return n.current.send_comment=e},disabled:!o,id:"send_comment",onClick:function(){return f()}})]}),Object(y.jsx)("div",{className:"comment_list",ref:function(e){return n.current.comment_list=e},children:0===g.length?h:m})]})},we=function(e){return Object(y.jsxs)("div",{className:"comment",id:e.id,children:[Object(y.jsx)(w,{user_id:e.c_detials.uid,width:"50px",height:"50px",style:{gridArea:"user_image",borderWidth:"2px",alignSelf:"center",justifySelf:"center"},to:"/Profile/".concat(e.c_detials.uid),onClick:function(){return null}}),Object(y.jsx)("span",{id:"user_name",children:e.c_detials.name}),Object(y.jsx)("p",{className:"comment_text",style:{whiteSpace:"break-spaces"},children:e.c_detials.text}),Object(y.jsx)("div",{className:"datetime",children:e.c_detials.upload_datetime})]})},ke=function(e){var t=Object(c.m)().user_id,n=Object(c.k)(),i=Object(s.useState)({userName:"",joinDatetime:"",email:"",blogs:[],comments:[],followings:[],followers:[]}),a=Object(r.a)(i,2),o=a[0],l=a[1];Object(s.useEffect)((function(){"null"===t&&n.goBack();var e=new XMLHttpRequest;e.open("POST",v.origin+"backend_api/getUserDetails"),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var t=JSON.parse(e.response);switch(t.status){case"success":console.log(t.userData),l(t.userData);break;case"fail":n.push("/Error")}}},e.setRequestHeader("userId",t),e.send()}),[t]);var u=Object(s.useState)(0),d=Object(r.a)(u,2),b=d[0],g=d[1];Object(s.useEffect)((function(){var e,t=0,n=Object(p.a)(o.blogs);try{for(n.s();!(e=n.n()).done;){t+=e.value.blog_details.views}}catch(s){n.e(s)}finally{n.f()}g(t)}),[o]);var j=Math.floor(360*Math.random());return Object(s.useEffect)((function(){document.getElementsByClassName("appbody")[0].scrollTo(0,0)})),Object(y.jsxs)("div",{className:"profile_div",children:[Object(y.jsx)("div",{className:"pic_bg",style:{filter:"hue-rotate(".concat(j,"deg)")}}),Object(y.jsxs)("div",{className:"user_head",children:[Object(y.jsx)(w,{user_id:t,to:"#",width:"100px",height:"100px",onClick:function(){return null},style:{borderWidth:"2px",borderRadius:"5px",margin:"auto 10px"}}),Object(y.jsx)("h3",{style:{color:"#00aed5",filter:"hue-rotate(".concat(j,"deg) brightness(0.5)")},id:"profile_username",children:o.userName}),Object(y.jsx)(Ne,{user_id:t,style:{marginLeft:"auto",marginRight:"20px",color:"#00aed5",filter:"hue-rotate(".concat(j,"deg) brightness(0.5)"),borderColor:"#00aed5"}})]}),Object(y.jsxs)("div",{className:"data",children:[Object(y.jsx)(Ce,{filter:"hue-rotate(".concat(j-33,"deg)  brightness(0.7)"),data_icon:E,data:"".concat(o.followers.length?o.followers.length:"No"," Followers")}),Object(y.jsx)(Ce,{filter:"hue-rotate(".concat(j-33,"deg)  brightness(0.7)"),data_icon:_,data:"".concat(o.followings.length?o.followings.length:"No"," Followings")}),Object(y.jsx)(Ce,{filter:"hue-rotate(".concat(j-33,"deg)  brightness(0.7)"),data_icon:I,data:"".concat(o.blogs.length?o.blogs.length:"No"," Blogs")}),Object(y.jsx)(Ce,{filter:"hue-rotate(".concat(j-33,"deg)  brightness(0.7)"),data_icon:Q,data:"".concat(b||"No"," Views")}),Object(y.jsx)(Ce,{filter:"hue-rotate(".concat(j-33,"deg)  brightness(0.7)"),data_icon:Z,data:o.joinDatetime}),Object(y.jsx)(Ce,{filter:"hue-rotate(".concat(j-33,"deg)  brightness(0.7)"),data_icon:ee,data:"".concat(o.comments.length?o.comments.length:"No"," Comments")}),Object(y.jsx)(Ce,{filter:"hue-rotate(".concat(j-33,"deg)  brightness(0.5)"),style:{flexBasis:"100%",overflow:"auto",userSelect:"text",placeContent:"center"},data_icon:U,data:o.email})]}),Object(y.jsx)(Se,{followers:o.followers,blogs:o.blogs,comments:o.comments,followings:o.followings,filter:"hue-rotate(".concat(j-33,"deg)")})]})},Se=function(e){var t=Object(s.useRef)({}),n=Object(s.useCallback)((function(e){var n=e.target.value,s=t.current.all_comments.getBoundingClientRect().width;switch(n){case"blogs":t.current.profile_tabs.scrollTo(0,0);break;case"followers":t.current.profile_tabs.scrollTo(s,0);break;case"comments":t.current.profile_tabs.scrollTo(2*s,0);break;case"followings":t.current.profile_tabs.scrollTo(3*s,0);break;default:t.current.profile_tabs.scrollTo(0,0)}}),[t]);return Object(y.jsxs)("div",{className:"profile_tabs_container",children:[Object(y.jsxs)("div",{className:"tab_options",children:[Object(y.jsx)("input",{value:"blogs",type:"radio",onInput:function(e){return n(e)},name:"options",id:"blogs_option",hidden:!0,defaultChecked:!0}),Object(y.jsx)("label",{style:{filter:e.filter,"--bg-image":"url(".concat(I,")")},htmlFor:"blogs_option",className:"optionlabel",children:"Blogs"}),Object(y.jsx)("input",{value:"followers",type:"radio",onInput:function(e){return n(e)},name:"options",id:"followers_option",hidden:!0}),Object(y.jsx)("label",{style:{filter:e.filter,"--bg-image":"url(".concat(E,")")},htmlFor:"followers_option",className:"optionlabel",children:"Followers"}),Object(y.jsx)("input",{value:"comments",type:"radio",onInput:function(e){return n(e)},name:"options",id:"comments_option",hidden:!0}),Object(y.jsx)("label",{style:{filter:e.filter,"--bg-image":"url(".concat(ee,")")},htmlFor:"comments_option",className:"optionlabel",children:"Comments"}),Object(y.jsx)("input",{value:"followings",type:"radio",onInput:function(e){return n(e)},name:"options",id:"followings_option",hidden:!0}),Object(y.jsx)("label",{style:{filter:e.filter,"--bg-image":"url(".concat(_,")")},htmlFor:"followings_option",className:"optionlabel",children:"Followings"})]}),Object(y.jsxs)("div",{className:"profile_tabs",ref:function(e){return t.current.profile_tabs=e},children:[Object(y.jsx)("span",{id:"all_blogs",ref:function(e){return t.current.all_blogs=e},children:e.blogs!==[]?e.blogs.map((function(e){return Object(y.jsx)(ae,{mini:!0,user_details:e.user_details,views:e.blog_details.views,likes:e.blog_details.likes,dislikes:e.blog_details.dislikes,date:e.blog_details.datetime,title:e.blog_details.title,discription:e.blog_details.discription,image_url:e.blog_details.blog_title_image,blog_id:e.blog_details.blog_id},e.blog_details.blog_id)})):"No Blogs"}),Object(y.jsx)("span",{id:"all_followers",ref:function(e){return t.current.all_followers=e},children:e.followers!==[]?e.followers.map((function(e){return Object(y.jsx)(Re,{follow:"block",user_details:e,onClick:function(){return null},to:"/Profile/".concat(e.user_id)},e.user_id)})):"No Followers"}),Object(y.jsx)("span",{id:"all_comments",ref:function(e){return t.current.all_comments=e},children:e.comments!==[]?e.comments.map((function(e){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(l.Link,{className:"comment_title",to:"/Blog/".concat(e.blog_title,"?id=").concat(e.blog_id),children:Object(y.jsx)("span",{children:e.blog_title})}),Object(y.jsx)(we,{c_detials:e},e.cid)]})})):"No Comments"}),Object(y.jsx)("span",{id:"all_followings",ref:function(e){return t.current.all_followings=e},children:e.followings!==[]?e.followings.map((function(e){return Object(y.jsx)(Re,{follow:"block",user_details:e,onClick:function(){return null},to:"/Profile/".concat(e.user_id)},e.user_id)})):"No Followings"})]})]})},Ce=function(e){return Object(y.jsxs)("span",{className:"data_item",title:e.data,style:e.style,children:[Object(y.jsx)("img",{src:e.data_icon,className:"data_icon",style:{filter:e.filter},width:"30",height:"30"}),e.data]})},Ne=function(e){var t=Object(s.useState)("Follow"),n=Object(r.a)(t,2),i=n[0],a=n[1],o=Object(s.useContext)(Ie),l=Object(s.useRef)(),u=Object(c.k)(),d=Object(s.useCallback)((function(){if(o===sessionStorage.session&&Boolean(sessionStorage.session)&&Boolean(o)){var t=new XMLHttpRequest;t.open("POST",v.origin+"backend_api/getFollowingList"),t.onreadystatechange=function(){if(200===t.status&&4===t.readyState){var n=JSON.parse(t.response);switch(n.status){case"success":-1!==n.followings.indexOf(e.user_id)?a("Following"):a("Follow");break;case"loginRequired":console.log("backend_api/getFollowingList LoginRequired")}}},t.setRequestHeader("session",o),t.send()}}),[o]);Object(s.useEffect)((function(){new IntersectionObserver((function(e){e[0].intersectionRatio>0&&d()})).observe(l)}),[l,e.user_id,o]);var b=Object(s.useCallback)((function(t){if(t.stopPropagation(),t.preventDefault(),o===sessionStorage.session&&(Boolean(sessionStorage.session)||Boolean(o))){var n=new XMLHttpRequest;n.open("POST",v.origin+"backend_api/followUnfollow"),n.onreadystatechange=function(){if(200===n.status&&4===n.readyState){var t=JSON.parse(n.response);switch(t.status){case"success":-1!==t.followings.indexOf(e.user_id)?(a("Following"),e.change_followers(t.followers_count)):(a("Follow"),e.change_followers(!1));break;case"loginRequired":console.log("backend_api/followUnfollow"),u.push("/Login")}}},n.setRequestHeader("session",o),n.setRequestHeader("toFollow",e.user_id),n.setRequestHeader("state",i),n.send()}}),[o,e.user_id,i]);return Object(y.jsx)("button",{id:"follow_button",style:e.style,ref:function(e){return l=e},onClick:b,disabled:o!==sessionStorage.session||!Boolean(sessionStorage.session)&&!Boolean(o),children:i})};function Re(e){var t=Object(s.useState)(e.user_details.followers_count),n=Object(r.a)(t,2),i=n[0],a=n[1];return Object(y.jsx)(l.Link,{className:"links",onClick:function(){return e.onClick(e.user_details.user_id)},style:{textDecoration:"none",width:"100%",display:"flex",maxWidth:"1000px",justifyContent:"center",placeItems:"center"},to:e.to,children:Object(y.jsxs)("div",{className:"miniprofile",children:[Object(y.jsx)(w,{width:"50px",height:"50px",to:"/Profile/".concat(e.user_details.user_id),style:{backgroundColor:"rgb(255, 255, 255)",margin:"auto",gridArea:"photo",borderWidth:"2px"},user_id:e.user_details.user_id,onClick:function(){return null}}),Object(y.jsx)("div",{className:"profile_name",title:e.user_details.user_name,children:e.user_details.user_name}),Object(y.jsxs)("div",{className:"follower",children:[Object(y.jsxs)("div",{className:"follower_count",style:{backgroundImage:"url(".concat(E,")")},children:["  ",i>0?i:"No"," Followers "]}),Object(y.jsx)(Ne,{change_followers:function(e){a(e)},user_id:e.user_details.user_id,style:{marginRight:"10px",marginLeft:"auto",display:e.follow}})]}),e.user_details.total_blogs>0?Object(y.jsx)("div",{className:"tag",children:"\ud83c\udff9Blogger"}):null]})})}var Le=function(e){var t=Object(c.n)().path,n=Object(s.useState)([]),i=Object(r.a)(n,2),a=i[0],o=i[1],l=Object(s.useRef)([]);Object(s.useEffect)((function(){var e=new XMLHttpRequest;return e.open("GET",v.origin+"backend_api/userlist"),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var t=JSON.parse(e.response);"success"===t.status?(l.current.list=t.userslist,o(t.userslist)):"fail"===t.status&&o([])}},e.send(),window.addEventListener("resize",h,!0),function(){return window.removeEventListener("resize",h,!0)}}),[]);var d=window.matchMedia("(min-width : 768px)"),b=Object(s.useRef)({}),g=Object(s.useState)(null),j=Object(r.a)(g,2),f=j[0],m=j[1];function h(){b.current.preview_window.style.display="none",b.current.blogians_window.style.gridColumn="1 / span 2",k("block")}var O=Object(c.k)(),x=Object(s.useState)("block"),_=Object(r.a)(x,2),w=_[0],k=_[1];return Object(y.jsxs)("div",{className:"holder",children:[Object(y.jsxs)("div",{className:"blogians",ref:function(e){return b.current.blogians_window=e},onDoubleClick:function(){return h()},children:[Object(y.jsx)("input",{className:"blogiansInput",onInput:function(e){return function(e){var t=e.target,n=e.nativeEvent.data;if(-1!="?\"':;!*()".search(n))t.setCustomValidity("username does not contain ?!:;#$%^&*\"'() "),t.value=t.value.slice(0,t.value.length-1),t.reportValidity();else{t.setCustomValidity(""),t.reportValidity();var s,i=[],a=Object(p.a)(l.current.list);try{for(a.s();!(s=a.n()).done;){var r=s.value;-1!=r.user_name.search(t.value)&&i.push(r),i.sort((function(e,t){return t.followers_count-e.followers_count})),o(i)}}catch(c){a.e(c)}finally{a.f()}}}(e)},style:{backgroundImage:"url(".concat(E,")")},type:"text",placeholder:"Search Blogians"}),Object(y.jsx)("div",{className:"allBlogians",children:a.map((function(e){return Object(y.jsx)(Re,{follow:w,user_details:e,onClick:function(e){return function(e){m(e),d.matches&&(b.current.preview_window.style.display="block",b.current.blogians_window.style.gridColumn="1 / span 1",k("none"))}(e)},to:"".concat(t,"/profile_small/").concat(e.user_id)},e.user_id)}))})]}),Object(y.jsx)("div",{className:"profile_preview",ref:function(e){return b.current.preview_window=e},children:Object(y.jsx)(u.CacheRoute,{exact:!0,path:"".concat(t,"/profile_small/:user_id"),children:d.matches?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ke,{}),"none"===w?Object(y.jsx)("button",{id:"FullpageProfile",onClick:function(){return O.push("/Profile/".concat(f))},children:" Full Profile "}):null]}):Object(y.jsx)(c.c,{to:"/Profile/".concat(f)})})})]})},Ie=(n(145),i.a.createContext(null)),Ee=i.a.createContext("Light");var Te=function(){var e=Object(s.useState)(null),t=Object(r.a)(e,2),n=t[0],i=t[1],a=Object(s.useState)("Light"),o=Object(r.a)(a,2),d=o[0],b=o[1],g=Object(s.useCallback)((function(e){i(e)})),p=Object(s.useCallback)((function(e){b(e)})),j=Object(s.useState)(null),f=Object(r.a)(j,2),m=f[0],h=f[1],O=Object(s.useCallback)((function(e){h(e)})),x=Object(s.useState)(null),_=Object(r.a)(x,2),w=_[0],k=_[1],S=Object(s.useState)("none"),C=Object(r.a)(S,2),N=C[0],R=C[1],L=function(e){R(e)},I=Object(c.k)(),E=Object(s.useState)([]),T=Object(r.a)(E,2),P=T[0],F=T[1];Object(s.useEffect)((function(){q(),fetch(v.origin+"backend_api/retriveHomeBlogs",{mode:"cors",method:"POST",headers:{session:n}}).then((function(e){return e.text().then((function(e){var t=JSON.parse(e);switch(t.status){case"success":F(t.blogs_list);break;case"fail":I.push("/Home")}}))}))}),[]),Object(s.useEffect)((function(){null!==sessionStorage.session&&i(sessionStorage.session)}),[sessionStorage]),Object(s.useEffect)((function(){"Dark"===d?(document.documentElement.style.backgroundColor="#272727",document.documentElement.style.color="white"):(document.documentElement.style.backgroundColor="white",document.documentElement.style.color="black")}),[d]);var H=window.matchMedia("(prefers-color-scheme:dark)"),q=Object(s.useCallback)((function(){H.matches?b("Dark"):b("Light")}),[d]);return Object(y.jsx)(l.HashRouter,{children:Object(y.jsx)(Ee.Provider,{value:d,children:Object(y.jsxs)(Ie.Provider,{value:n,children:[Object(y.jsx)(B,{bloglist:P,login_state:n,change_theme:p}),Object(y.jsxs)("div",{className:"appcontent",ref:function(e){k(e)},children:[Object(y.jsxs)("div",{className:"appbody",ref:O,children:[Object(y.jsx)(K,{loading:N}),Object(y.jsxs)(u.CacheSwitch,{children:[Object(y.jsx)(c.d,{exact:!0,path:"/Blog/:title",children:Object(y.jsx)(xe,{appbodyloading:L})}),Object(y.jsx)(u.CacheRoute,{exact:!0,path:"/Login",children:Object(y.jsx)(W,{appbodyloading:L,change_login_context:g})}),Object(y.jsx)(u.CacheRoute,{exact:!0,path:"/Signup",children:Object(y.jsx)($,{appbodyloading:L})}),Object(y.jsx)(c.d,{path:"/Blogians",children:Object(y.jsx)(Le,{})}),Object(y.jsx)(c.d,{exact:!0,path:"/Profile/:user_id",children:Object(y.jsx)(ke,{})}),Object(y.jsx)(c.d,{path:"/UploadBlog",children:Object(y.jsx)(de,{appbodyloading:L})}),Object(y.jsx)(c.d,{exact:!0,path:"/Home",children:Object(y.jsx)(ie,{blogs_list:P})}),Object(y.jsx)(u.CacheRoute,{exact:!0,path:"/Error",children:Object(y.jsx)("h1",{children:"Error"})}),Object(y.jsx)(c.d,{path:"/",children:Object(y.jsx)(c.c,{to:"/Home"})})]})]}),Object(y.jsx)(J,{appbody:m,appcontainer:w})]})]})})})},Pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,147)).then((function(t){var n=t.getCLS,s=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),s(e),i(e),a(e),o(e)}))};o.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(Te,{})}),document.getElementById("root")),Pe()},5:function(e){e.exports=JSON.parse('{"origin":"https://blogtube.herokuapp.com/"}')},57:function(e,t,n){},58:function(e,t,n){},80:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){}},[[146,1,2]]]);
//# sourceMappingURL=main.e78e2703.chunk.js.map