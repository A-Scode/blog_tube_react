{"ast":null,"code":"import _objectSpread from\"D:/Python files/Start Django/blog_tube/frontend/blog_tube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Python files/Start Django/blog_tube/frontend/blog_tube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import unkownUser from\"./statics/images/unkownUser.svg\";import appConfig from'./statics/appConfig.json';import{Link}from'react-router-dom';import{useEffect,useRef,useContext,useState}from'react';import{Login_context}from'../App';import{jsx as _jsx}from\"react/jsx-runtime\";var UserImage=function UserImage(props){var session=useContext(Login_context);var _ref=useRef(\"\");var _useState=useState({width:props.width,aspectRatio:\"1 / 1\",borderRadius:'100%',borderStyle:'inset',backgroundColor:\"rgb(255 255 255 / 55%)\",boxShadow:\"0px 0px 8px 3px #3b3b3b8c\",borderWidth:'4px',borderColor:'#0334dd',backgroundSize:\"contain\",backgroundPosition:'center',alignSelf:'center',justifySelf:'center',backgroundRepeat:'no-repeat'}),_useState2=_slicedToArray(_useState,2),div_style=_useState2[0],set_div_style=_useState2[1];var flag;function load_image(){if(flag===false){if(props.user_id===\"unknown\"){set_div_style(_objectSpread(_objectSpread(_objectSpread({},div_style),props.style),{},{backgroundImage:\"url(\".concat(unkownUser,\")\")}));var to='/Signup';flag=true;}else{var xhr=new XMLHttpRequest();xhr.open('POST',appConfig.origin+\"backend_api/getprofilephoto\");xhr.responseType='blob';xhr.onreadystatechange=function(){if(xhr.readyState===4&&xhr.status===200){var response=xhr.response;set_div_style(_objectSpread(_objectSpread(_objectSpread({},div_style),props.style),{},{backgroundImage:\"url(\".concat(URL.createObjectURL(response),\")\")}));flag=true;}};xhr.setRequestHeader(\"session\",session?session:'');xhr.setRequestHeader(\"photouid\",props.user_id);xhr.send();}}}useEffect(function(){var observer=new IntersectionObserver(function(entries,observer){if(entries[0].intersectionRatio>0){load_image();}});observer.observe(_ref.current);flag=false;set_div_style(_objectSpread(_objectSpread({},div_style),props.style));},[props.user_id,session,sessionStorage]);return/*#__PURE__*/_jsx(Link,{to:props.to,ref:function ref(el){return _ref.current=el;},style:div_style,onClick:function onClick(){return props.onClick();}});};export default UserImage;","map":{"version":3,"sources":["D:/Python files/Start Django/blog_tube/frontend/blog_tube/src/componenets/userImage.js"],"names":["appConfig","Link","useEffect","useRef","useContext","useState","Login_context","UserImage","props","session","ref","width","aspectRatio","borderRadius","borderStyle","backgroundColor","boxShadow","borderWidth","borderColor","backgroundSize","backgroundPosition","alignSelf","justifySelf","backgroundRepeat","div_style","set_div_style","flag","load_image","user_id","style","backgroundImage","unkownUser","to","xhr","XMLHttpRequest","open","origin","responseType","onreadystatechange","readyState","status","response","URL","createObjectURL","setRequestHeader","send","observer","IntersectionObserver","entries","intersectionRatio","observe","current","sessionStorage","el","onClick"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types'\r\nimport unkownUser from './statics/images/unkownUser.svg'\r\nimport appConfig from './statics/appConfig.json'\r\nimport {Link } from 'react-router-dom'\r\nimport { useEffect, useRef ,useContext , useState} from 'react'\r\nimport {Login_context} from '../App'\r\nlet UserImage = props=>{\r\n    var session  = useContext(Login_context)\r\n    let ref = useRef(\"\")\r\n    const [ div_style , set_div_style] = useState({\r\n        width        : props.width,\r\n        aspectRatio:\"1 / 1\",\r\n        borderRadius : '100%',\r\n        borderStyle  : 'inset',\r\n        backgroundColor: \"rgb(255 255 255 / 55%)\",\r\n        boxShadow: \"0px 0px 8px 3px #3b3b3b8c\",\r\n        borderWidth  : '4px',\r\n        borderColor  : '#0334dd',\r\n        backgroundSize : `contain`,\r\n        backgroundPosition:'center',\r\n        alignSelf : 'center',\r\n        justifySelf : 'center',\r\n        backgroundRepeat :'no-repeat'\r\n    })\r\n    var flag;\r\n\r\n    function load_image(){\r\n        if (flag === false){\r\n        if (props.user_id === \"unknown\"){\r\n            set_div_style({...div_style , ...props.style ,backgroundImage : `url(${unkownUser})` })\r\n            let to = '/Signup'\r\n            flag = true\r\n        }else{\r\n                let xhr = new XMLHttpRequest()\r\n    xhr.open('POST', appConfig.origin + \"backend_api/getprofilephoto\")\r\n    xhr.responseType = 'blob'\r\n    xhr.onreadystatechange = ()=>{\r\n        if (xhr.readyState === 4 && xhr.status === 200){\r\n            let response = xhr.response\r\n            set_div_style({...div_style , ...props.style ,backgroundImage : `url(${URL.createObjectURL(response)})` })\r\n            flag = true\r\n        }\r\n    }\r\n    xhr.setRequestHeader(\"session\" , session?session:'')\r\n    xhr.setRequestHeader(\"photouid\" , props.user_id)\r\n    xhr.send()\r\n        }}\r\n    }\r\n    \r\n\r\n    useEffect(()=>{\r\n        var observer = new IntersectionObserver((entries,observer)=>{\r\n            if (entries[0].intersectionRatio > 0){\r\n                load_image()\r\n            }\r\n        })\r\n        observer.observe(ref.current)\r\n        flag = false;\r\n        set_div_style({...div_style , ...props.style})\r\n},[props.user_id,session ,sessionStorage])\r\n\r\n    return  <Link to = {props.to} ref ={el =>ref.current =el}  style = {div_style} onClick= {()=>props.onClick()} ></Link>\r\n}\r\n\r\n\r\nUserImage.propTypes = {\r\n    width : PropTypes.string.isRequired,\r\n    height : PropTypes.string.isRequired,\r\n    to : PropTypes.string.isRequired,\r\n    style : PropTypes.object\r\n}\r\n\r\nexport default UserImage;"]},"metadata":{},"sourceType":"module"}