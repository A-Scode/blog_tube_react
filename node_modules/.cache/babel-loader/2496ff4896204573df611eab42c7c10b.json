{"ast":null,"code":"var _jsxFileName = \"D:\\\\Python files\\\\Start Django\\\\blog_tube\\\\frontend\\\\blog_tube\\\\src\\\\componenets\\\\appUserProfile.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport './statics/css/appUserProfile.css';\nimport { useParams } from 'react-router-dom';\nimport { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useHistory, useRouteMatch } from 'react-router';\nimport appConfig from './statics/appConfig.json';\nimport PropTypes from 'prop-types';\nimport { Login_context } from '../App';\nimport UserImage from './userImage';\nimport followers_icon from \"./statics/images/blogians.svg\";\nimport followings_icon from \"./statics/images/unkownUser.svg\";\nimport blogs_icon from \"./statics/images/uploadblogIcon.svg\";\nimport views_icon from \"./statics/images/preview.svg\";\nimport email_icon from \"./statics/images/email.svg\";\nimport datetime_icon from \"./statics/images/join_datetime.svg\";\nimport comments_icon from \"./statics/images/comments.svg\";\nimport { BlogComponent } from './appHome';\nimport { BlogiansMiniProfile } from './appBlogians';\nimport { Comment } from './appBlog';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AppUserProfile = props => {\n  _s();\n\n  let {\n    user_id\n  } = useParams();\n  const history = useHistory();\n  const [profile_data, set_profile_data] = useState({\n    userName: '',\n    joinDatetime: '',\n    email: '',\n    blogs: [],\n    comments: [],\n    followings: [],\n    followers: []\n  });\n  useEffect(() => {\n    if (user_id === \"null\") history.goBack();\n    let xhr = new XMLHttpRequest();\n    xhr.open('POST', appConfig.origin + `backend_api/getUserDetails`);\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState === 4 && xhr.status === 200) {\n        let response = JSON.parse(xhr.response);\n\n        switch (response.status) {\n          case \"success\":\n            console.log(response.userData);\n            set_profile_data(response.userData);\n            break;\n\n          case \"fail\":\n            history.push('/Error');\n            break;\n\n          default:\n            break;\n        }\n      }\n    };\n\n    xhr.setRequestHeader('userId', user_id);\n    xhr.send();\n  }, [user_id]);\n  const [views, set_views] = useState(0);\n  useEffect(() => {\n    let views = 0;\n\n    for (let i of profile_data.blogs) {\n      views += i.blog_details.views;\n    }\n\n    set_views(views);\n  }, [profile_data]);\n  const usingColor = Math.floor(Math.random() * 360);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile_div\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pic_bg\",\n      style: {\n        filter: `hue-rotate(${usingColor}deg)`\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user_head\",\n      children: [/*#__PURE__*/_jsxDEV(UserImage, {\n        user_id: user_id,\n        to: \"#\",\n        width: \"100px\",\n        height: \"100px\",\n        onClick: () => null,\n        style: {\n          borderWidth: \"2px\",\n          borderRadius: \"5px\",\n          margin: \"auto 10px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          color: \"#00aed5\",\n          filter: `hue-rotate(${usingColor}deg) brightness(0.5)`\n        },\n        id: \"profile_username\",\n        children: profile_data.userName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(FollowButton, {\n        user_id: user_id,\n        style: {\n          marginLeft: 'auto',\n          marginRight: '20px',\n          color: \"#00aed5\",\n          filter: `hue-rotate(${usingColor}deg) brightness(0.5)`,\n          borderColor: \"#00aed5\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"data\",\n      children: [/*#__PURE__*/_jsxDEV(UserDataItem, {\n        filter: `hue-rotate(${usingColor - 33}deg)  brightness(0.7)`,\n        data_icon: followers_icon,\n        data: `${profile_data.followers.length ? profile_data.followers.length : 'No'} Followers`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(UserDataItem, {\n        filter: `hue-rotate(${usingColor - 33}deg)  brightness(0.7)`,\n        data_icon: followings_icon,\n        data: `${profile_data.followings.length ? profile_data.followings.length : 'No'} Followings`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(UserDataItem, {\n        filter: `hue-rotate(${usingColor - 33}deg)  brightness(0.7)`,\n        data_icon: blogs_icon,\n        data: `${profile_data.blogs.length ? profile_data.blogs.length : 'No'} Blogs`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(UserDataItem, {\n        filter: `hue-rotate(${usingColor - 33}deg)  brightness(0.7)`,\n        data_icon: views_icon,\n        data: `${views ? views : 'No'} Views`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(UserDataItem, {\n        filter: `hue-rotate(${usingColor - 33}deg)  brightness(0.7)`,\n        data_icon: datetime_icon,\n        data: profile_data.joinDatetime\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(UserDataItem, {\n        filter: `hue-rotate(${usingColor - 33}deg)  brightness(0.7)`,\n        data_icon: comments_icon,\n        data: `${profile_data.comments.length ? profile_data.comments.length : 'No'} Comments`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(UserDataItem, {\n        filter: `hue-rotate(${usingColor - 33}deg)  brightness(0.5)`,\n        style: {\n          flexBasis: '100%',\n          overflow: 'auto',\n          userSelect: 'text',\n          placeContent: \"center\"\n        },\n        data_icon: email_icon,\n        data: profile_data.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ProfileTabs, {\n      followers: profile_data.followers,\n      blogs: profile_data.blogs,\n      comments: profile_data.comments,\n      followings: profile_data.followings,\n      filter: `hue-rotate(${usingColor - 33}deg)`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 13\n  }, this);\n};\n\n_s(AppUserProfile, \"vOskj91CkIJ5Z990KKrVz9VIOU4=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = AppUserProfile;\nexport default AppUserProfile;\n\nconst ProfileTabs = props => {\n  _s2();\n\n  var ref = useRef({});\n  const change_tab = useCallback(event => {\n    let value = event.target.value;\n    let width = ref.current.all_comments.getBoundingClientRect().width;\n\n    switch (value) {\n      case \"blogs\":\n        ref.current.profile_tabs.scrollTo(0, 0);\n        break;\n\n      case \"followers\":\n        ref.current.profile_tabs.scrollTo(width, 0);\n        break;\n\n      case \"comments\":\n        ref.current.profile_tabs.scrollTo(width * 2, 0);\n        break;\n\n      case \"followings\":\n        ref.current.profile_tabs.scrollTo(width * 3, 0);\n        break;\n\n      default:\n        ref.current.profile_tabs.scrollTo(0, 0);\n        break;\n    }\n  }, [ref]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile_tabs_container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tab_options\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: \"blogs\",\n        type: \"radio\",\n        onInput: e => change_tab(e),\n        name: \"options\",\n        id: \"blogs_option\",\n        hidden: true,\n        defaultChecked: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          filter: props.filter,\n          '--bg-image': `url(${blogs_icon})`\n        },\n        htmlFor: \"blogs_option\",\n        className: \"optionlabel\",\n        children: \"Blogs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: \"followers\",\n        type: \"radio\",\n        onInput: e => change_tab(e),\n        name: \"options\",\n        id: \"followers_option\",\n        hidden: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          filter: props.filter,\n          '--bg-image': `url(${followers_icon})`\n        },\n        htmlFor: \"followers_option\",\n        className: \"optionlabel\",\n        children: \"Followers\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: \"comments\",\n        type: \"radio\",\n        onInput: e => change_tab(e),\n        name: \"options\",\n        id: \"comments_option\",\n        hidden: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          filter: props.filter,\n          '--bg-image': `url(${comments_icon})`\n        },\n        htmlFor: \"comments_option\",\n        className: \"optionlabel\",\n        children: \"Comments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: \"followings\",\n        type: \"radio\",\n        onInput: e => change_tab(e),\n        name: \"options\",\n        id: \"followings_option\",\n        hidden: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          filter: props.filter,\n          '--bg-image': `url(${followings_icon})`\n        },\n        htmlFor: \"followings_option\",\n        className: \"optionlabel\",\n        children: \"Followings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile_tabs\",\n      ref: el => ref.current.profile_tabs = el,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        id: \"all_blogs\",\n        ref: el => ref.current.all_blogs = el,\n        children: [props.blogs !== [] ? props.blogs.map(item => /*#__PURE__*/_jsxDEV(BlogComponent, {\n          mini: true,\n          user_details: item.user_details,\n          views: item.blog_details.views,\n          likes: item.blog_details.likes,\n          dislikes: item.blog_details.dislikes,\n          date: item.blog_details.datetime,\n          title: item.blog_details.title,\n          discription: item.blog_details.discription,\n          image_url: item.blog_details.blog_title_image,\n          blog_id: item.blog_details.blog_id\n        }, item.blog_details.blog_id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 58\n        }, this)) : null, props.blog === [] ? \"No Blogs\" : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        id: \"all_followers\",\n        ref: el => ref.current.all_followers = el,\n        children: props.followers !== [] ? props.followers.map(item => /*#__PURE__*/_jsxDEV(BlogiansMiniProfile, {\n          follow: 'block',\n          user_details: item,\n          onClick: () => null,\n          to: `Profile/${item.user_id}`\n        }, item.user_id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 48\n        }, this)) : \"No Followers\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        id: \"all_comments\",\n        ref: el => ref.current.all_comments = el,\n        children: props.comments !== [] ? props.comments.map(item => /*#__PURE__*/_jsxDEV(Comment, {\n          c_detials: item\n        }, item.cid, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 44\n        }, this)) : \"No Comments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        id: \"all_followings\",\n        ref: el => ref.current.all_followings = el,\n        children: props.followings !== [] ? props.followings.map(item => /*#__PURE__*/_jsxDEV(BlogiansMiniProfile, {\n          follow: 'block',\n          user_details: item,\n          onClick: () => null,\n          to: `Profile/${item.user_id}`\n        }, item.user_id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 49\n        }, this)) : \"No Followings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(ProfileTabs, \"B/vvtQ3SNHmCeNNUlHBSYOuWfAU=\");\n\n_c2 = ProfileTabs;\n\nconst UserDataItem = props => {\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"data_item\",\n    title: props.data,\n    style: props.style,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: props.data_icon,\n      className: \"data_icon\",\n      style: {\n        filter: props.filter\n      },\n      width: \"30\",\n      height: \"30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }, this), props.data]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 9\n  }, this);\n};\n\n_c3 = UserDataItem;\n\nconst FollowButton = props => {\n  _s3();\n\n  const [follow_state, set_follow_state] = useState('Follow');\n  var context = useContext(Login_context);\n  var ref = useRef();\n  const history = useHistory();\n  const check_follower = useCallback(() => {\n    if (context === sessionStorage.session) {\n      let xhr = new XMLHttpRequest();\n      xhr.open('POST', appConfig.origin + 'backend_api/getFollowingList');\n\n      xhr.onreadystatechange = () => {\n        if (xhr.status === 200 && xhr.readyState === 4) {\n          let response = JSON.parse(xhr.response);\n\n          switch (response.status) {\n            case \"success\":\n              response.followings.indexOf(props.user_id) !== -1 ? set_follow_state('Following') : set_follow_state('Follow');\n              break;\n\n            case \"loginRequired\":\n              history.push('/Error');\n              break;\n\n            case \"fail\":\n              check_follower();\n              break;\n\n            default:\n              break;\n          }\n        }\n      };\n\n      xhr.setRequestHeader('session', context);\n      xhr.send();\n    }\n  });\n  useEffect(() => {\n    const observer = new IntersectionObserver(entries => {\n      if (entries[0].intersectionRatio > 0) {\n        check_follower();\n      }\n    });\n    observer.observe(ref);\n  }, [ref, props.user_id]);\n  const follow_unfollow = useCallback(event => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (context === sessionStorage.session) {\n      let xhr = new XMLHttpRequest();\n      xhr.open('POST', appConfig.origin + 'backend_api/followUnfollow');\n\n      xhr.onreadystatechange = () => {\n        if (xhr.status === 200 && xhr.readyState === 4) {\n          let response = JSON.parse(xhr.response);\n\n          switch (response.status) {\n            case \"success\":\n              if (response.followings.indexOf(props.user_id) !== -1) {\n                set_follow_state('Following');\n                props.change_followers(true);\n              } else {\n                set_follow_state('Follow');\n                props.change_followers(false);\n              }\n\n              break;\n\n            case \"loginRequired\":\n              history.push('/Error');\n              break;\n\n            case \"fail\":\n              break;\n\n            default:\n              break;\n          }\n        }\n      };\n\n      xhr.setRequestHeader('session', context);\n      xhr.setRequestHeader('toFollow', props.user_id);\n      xhr.setRequestHeader('state', follow_state);\n      xhr.send();\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    id: \"follow_button\",\n    style: props.style,\n    ref: el => ref = el,\n    onClick: follow_unfollow,\n    disabled: context !== sessionStorage.session || JSON.parse(localStorage.login_data).user_id === props.user_id,\n    children: follow_state\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 262,\n    columnNumber: 9\n  }, this);\n};\n\n_s3(FollowButton, \"rJA0fgoUFOOUmwU5D9/AhmTjjrQ=\", false, function () {\n  return [useHistory];\n});\n\n_c4 = FollowButton;\nexport { FollowButton };\nFollowButton.propTypes = {\n  user_id: PropTypes.string.isRequired,\n  style: PropTypes.object\n};\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"AppUserProfile\");\n$RefreshReg$(_c2, \"ProfileTabs\");\n$RefreshReg$(_c3, \"UserDataItem\");\n$RefreshReg$(_c4, \"FollowButton\");","map":{"version":3,"sources":["D:/Python files/Start Django/blog_tube/frontend/blog_tube/src/componenets/appUserProfile.js"],"names":["useParams","useCallback","useContext","useEffect","useMemo","useRef","useState","useHistory","useRouteMatch","appConfig","PropTypes","Login_context","UserImage","BlogComponent","BlogiansMiniProfile","Comment","AppUserProfile","props","user_id","history","profile_data","set_profile_data","userName","joinDatetime","email","blogs","comments","followings","followers","goBack","xhr","XMLHttpRequest","open","origin","onreadystatechange","readyState","status","response","JSON","parse","console","log","userData","push","setRequestHeader","send","views","set_views","i","blog_details","usingColor","Math","floor","random","filter","borderWidth","borderRadius","margin","color","marginLeft","marginRight","borderColor","followers_icon","length","followings_icon","blogs_icon","views_icon","datetime_icon","comments_icon","flexBasis","overflow","userSelect","placeContent","email_icon","ProfileTabs","ref","change_tab","event","value","target","width","current","all_comments","getBoundingClientRect","profile_tabs","scrollTo","e","el","all_blogs","map","item","user_details","likes","dislikes","datetime","title","discription","blog_title_image","blog_id","blog","all_followers","cid","all_followings","UserDataItem","data","style","data_icon","FollowButton","follow_state","set_follow_state","context","check_follower","sessionStorage","session","indexOf","observer","IntersectionObserver","entries","intersectionRatio","observe","follow_unfollow","stopPropagation","preventDefault","change_followers","localStorage","login_data","propTypes","string","isRequired","object"],"mappings":"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","sourcesContent":["import './statics/css/appUserProfile.css'\r\nimport {useParams} from 'react-router-dom'\r\nimport { useCallback, useContext , useEffect ,useMemo,useRef,useState} from 'react'\r\nimport { useHistory, useRouteMatch } from 'react-router'\r\nimport appConfig from './statics/appConfig.json'\r\nimport PropTypes from 'prop-types'\r\nimport { Login_context } from '../App'\r\nimport UserImage from './userImage'\r\nimport followers_icon from './statics/images/blogians.svg'\r\nimport followings_icon from './statics/images/unkownUser.svg'\r\nimport blogs_icon from './statics/images/uploadblogIcon.svg'\r\nimport views_icon from './statics/images/preview.svg'\r\nimport email_icon from './statics/images/email.svg'\r\nimport datetime_icon from './statics/images/join_datetime.svg'\r\nimport comments_icon from './statics/images/comments.svg'\r\nimport { BlogComponent } from './appHome'\r\nimport { BlogiansMiniProfile } from './appBlogians'\r\nimport { Comment } from './appBlog'\r\n\r\nconst AppUserProfile = props =>{\r\n    let {user_id} = useParams()\r\n    const history = useHistory()\r\n\r\n    const [profile_data , set_profile_data] = useState({\r\n        userName:'',joinDatetime:'',email:'',\r\n        blogs:[],comments:[],followings:[],\r\n        followers:[]\r\n    })\r\n    useEffect(()=>{\r\n        if(user_id === \"null\")history.goBack()\r\n\r\n        let xhr = new XMLHttpRequest()\r\n        xhr.open('POST' , appConfig.origin+`backend_api/getUserDetails`)\r\n        xhr.onreadystatechange=()=>{\r\n            if(xhr.readyState === 4 && xhr.status === 200){\r\n                let response = JSON.parse(xhr.response)\r\n                switch (response.status) {\r\n                    case \"success\":\r\n                        console.log(response.userData)\r\n                        set_profile_data(response.userData)\r\n                        break;\r\n                    case \"fail\":\r\n                        history.push('/Error')\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        xhr.setRequestHeader('userId' , user_id)\r\n        xhr.send()\r\n        \r\n    }, [user_id])\r\n\r\n    const[ views, set_views]= useState(0) ;\r\n\r\n    useEffect(()=>{\r\n        let views = 0\r\n        for (let i of profile_data.blogs){\r\n            views+= i.blog_details.views\r\n        }\r\n        set_views(views)\r\n    },[profile_data])\r\n\r\n    const usingColor = Math.floor(Math.random()*360)\r\n    \r\n    return (<div className = \"profile_div\">\r\n        <div className = \"pic_bg\" style = {{filter:`hue-rotate(${usingColor}deg)`}}></div>\r\n        <div className=\"user_head\">\r\n            <UserImage  user_id= {user_id} to=\"#\"  \r\n            width= '100px' height = '100px'  onClick={()=>null}\r\n            style = {{borderWidth:\"2px\",borderRadius:\"5px\" ,margin:\"auto 10px\"}}\r\n            \r\n            />\r\n            <h3 style={{color:\"#00aed5\",filter:`hue-rotate(${usingColor}deg) brightness(0.5)`}}\r\n             id=\"profile_username\" >{profile_data.userName}</h3>\r\n            <FollowButton user_id = {user_id}\r\n            style={{marginLeft:'auto' ,marginRight:'20px',color:\"#00aed5\",filter:`hue-rotate(${usingColor}deg) brightness(0.5)`,\r\n            borderColor:\"#00aed5\"\r\n        }} />\r\n        </div>\r\n        <div className=\"data\">\r\n            <UserDataItem filter = {`hue-rotate(${usingColor-33}deg)  brightness(0.7)`} data_icon = {followers_icon} data={`${profile_data.followers.length?profile_data.followers.length:'No'} Followers`} />\r\n            <UserDataItem filter = {`hue-rotate(${usingColor-33}deg)  brightness(0.7)`} data_icon = {followings_icon} data={`${profile_data.followings.length?profile_data.followings.length:'No'} Followings`} />\r\n            <UserDataItem filter = {`hue-rotate(${usingColor-33}deg)  brightness(0.7)`} data_icon = {blogs_icon} data={`${profile_data.blogs.length?profile_data.blogs.length:'No'} Blogs`} />\r\n            <UserDataItem filter = {`hue-rotate(${usingColor-33}deg)  brightness(0.7)`} data_icon = {views_icon} data={`${views?views:'No'} Views`} />\r\n            <UserDataItem filter = {`hue-rotate(${usingColor-33}deg)  brightness(0.7)`} data_icon = {datetime_icon} data={profile_data.joinDatetime} />\r\n            <UserDataItem filter = {`hue-rotate(${usingColor-33}deg)  brightness(0.7)`} data_icon = {comments_icon} data={`${profile_data.comments.length?profile_data.comments.length:'No'} Comments`} />\r\n            <UserDataItem filter = {`hue-rotate(${usingColor-33}deg)  brightness(0.5)`} \r\n            style = {{flexBasis:'100%', overflow:'auto',userSelect:'text',placeContent:\"center\"}}\r\n            data_icon = {email_icon} data={profile_data.email} />\r\n        </div>\r\n        <ProfileTabs \r\n        followers = {profile_data.followers}\r\n        blogs = {profile_data.blogs} \r\n        comments = {profile_data.comments}\r\n        followings = {profile_data.followings}\r\n        filter = {`hue-rotate(${usingColor-33}deg)`} />\r\n    </div>)\r\n}\r\nexport default AppUserProfile;\r\n\r\nconst ProfileTabs=props=>{\r\n    var ref = useRef({})\r\n    const change_tab  = useCallback(event=>{\r\n        let value = event.target.value\r\n        let width = ref.current.all_comments.getBoundingClientRect().width\r\n        switch (value){\r\n            case \"blogs\":\r\n                ref.current.profile_tabs.scrollTo(0,0)\r\n                break;\r\n            case \"followers\":\r\n                ref.current.profile_tabs.scrollTo(width,0)\r\n                break;\r\n            case \"comments\":\r\n                ref.current.profile_tabs.scrollTo(width*2,0)\r\n                break;\r\n            case \"followings\":\r\n                ref.current.profile_tabs.scrollTo(width*3,0)\r\n                break;\r\n            default :\r\n                ref.current.profile_tabs.scrollTo(0,0)\r\n                break;\r\n        }\r\n    },[ref])\r\n    \r\n    return(\r\n        <div className=\"profile_tabs_container\">\r\n        <div className=\"tab_options\">\r\n            <input value = \"blogs\" type=\"radio\" onInput={e=>change_tab(e)} name=\"options\" id=\"blogs_option\" hidden defaultChecked />\r\n            <label style = {{filter:props.filter,'--bg-image':`url(${blogs_icon})`}} htmlFor=\"blogs_option\" className=\"optionlabel\">Blogs</label>\r\n            <input value = \"followers\" type=\"radio\" onInput={e=>change_tab(e)} name=\"options\" id=\"followers_option\" hidden />\r\n            <label style = {{filter:props.filter,'--bg-image':`url(${followers_icon})`}} htmlFor=\"followers_option\" className=\"optionlabel\">Followers</label>\r\n            <input value = \"comments\" type=\"radio\" onInput={e=>change_tab(e)} name=\"options\" id=\"comments_option\" hidden />\r\n            <label style = {{filter:props.filter,'--bg-image':`url(${comments_icon})`}} htmlFor=\"comments_option\" className=\"optionlabel\">Comments</label>\r\n            <input value = \"followings\" type=\"radio\" onInput={e=>change_tab(e)} name=\"options\" id=\"followings_option\" hidden />\r\n            <label style = {{filter:props.filter,'--bg-image':`url(${followings_icon})`}} htmlFor=\"followings_option\" className=\"optionlabel\">Followings</label>\r\n        </div>\r\n        <div className=\"profile_tabs\" ref = {el => ref.current.profile_tabs = el} >\r\n            <span id=\"all_blogs\" ref={el=>ref.current.all_blogs=el} >\r\n                {props.blogs!==[]?props.blogs.map(item=>(<BlogComponent mini={true} user_details={item.user_details}\r\n\r\n            views= {item.blog_details.views} likes={item.blog_details.likes} dislikes={item.blog_details.dislikes}\r\n            date = {item.blog_details.datetime}\r\n            title = {item.blog_details.title} \r\n            discription = {item.blog_details.discription}\r\n            image_url = {item.blog_details.blog_title_image} blog_id = {item.blog_details.blog_id}\r\n            key = {item.blog_details.blog_id} />))\r\n            :null}\r\n            {props.blog === []?\"No Blogs\":null}\r\n            </span>\r\n            <span id=\"all_followers\"  ref={el=>ref.current.all_followers=el} >\r\n                    {props.followers !==[]?\r\n                    props.followers.map(item=>(<BlogiansMiniProfile follow={'block'} key = {item.user_id} user_details = {item}  onClick = {()=>null} to={`Profile/${item.user_id}`} />))\r\n                    :\"No Followers\"}\r\n            </span>\r\n            <span id=\"all_comments\" ref={el=>ref.current.all_comments=el} >\r\n                {props.comments!==[]?\r\n                (props.comments.map(item=>(<Comment c_detials = {item} key ={item.cid} />)))\r\n                :\"No Comments\"}\r\n            </span>\r\n            <span id=\"all_followings\" ref={el=>ref.current.all_followings=el} >\r\n            {props.followings !==[]?\r\n                    props.followings.map(item=>(<BlogiansMiniProfile follow={'block'} key = {item.user_id} user_details = {item}  onClick = {()=>null} to={`Profile/${item.user_id}`} />))\r\n                    :\"No Followings\"}\r\n            </span>\r\n        </div>\r\n        \r\n        </div>\r\n    )\r\n}\r\n\r\nconst UserDataItem = props=>{\r\n    return (\r\n        <span className=\"data_item\" title = {props.data} style = {props.style}>\r\n            <img src = {props.data_icon} className = \"data_icon\" style = {{filter:props.filter}} width= \"30\" height=\"30\"  />\r\n            {props.data}\r\n            </span>\r\n    )\r\n}\r\n\r\nconst FollowButton=props=>{\r\n    const [follow_state, set_follow_state] = useState('Follow')\r\n    var context = useContext(Login_context)\r\n    var ref = useRef()\r\n    const history = useHistory()\r\n\r\n    const check_follower  = useCallback(()=>{\r\n        if (context === sessionStorage.session){\r\n            let xhr = new XMLHttpRequest()\r\n            xhr.open('POST' , appConfig.origin+'backend_api/getFollowingList')\r\n            xhr.onreadystatechange=()=>{if(xhr.status === 200 && xhr.readyState ===4){\r\n                let response = JSON.parse(xhr.response)\r\n                \r\n                switch (response.status) {\r\n                    case \"success\":\r\n                        response.followings.indexOf(props.user_id)!== -1?\r\n                        set_follow_state('Following'):set_follow_state('Follow')\r\n                        break;\r\n                    case \"loginRequired\":\r\n                        history.push('/Error')\r\n                        break;\r\n                    case \"fail\":\r\n                        check_follower()\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }}\r\n            xhr.setRequestHeader('session'  , context)\r\n            xhr.send()\r\n        }\r\n    })\r\n\r\n    \r\n    useEffect(()=>{\r\n        const observer = new IntersectionObserver(entries=>{\r\n            if (entries[0].intersectionRatio > 0){\r\n                check_follower()\r\n            }\r\n        })\r\n        observer.observe(ref)\r\n\r\n    },[ref,props.user_id])\r\n\r\n    const follow_unfollow = useCallback((event)=>{\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n        if (context === sessionStorage.session){\r\n            let xhr = new XMLHttpRequest()\r\n            xhr.open('POST' , appConfig.origin+'backend_api/followUnfollow')\r\n            xhr.onreadystatechange=()=>{if(xhr.status === 200 && xhr.readyState ===4){\r\n                let response = JSON.parse(xhr.response)\r\n                switch (response.status) {\r\n                    case \"success\":\r\n                        if(response.followings.indexOf(props.user_id)!== -1){\r\n                        set_follow_state('Following')\r\n                        props.change_followers(true)\r\n                    }\r\n                        else{\r\n                            set_follow_state('Follow')\r\n                            props.change_followers(false)\r\n                    }\r\n                        \r\n                        break;\r\n                    case \"loginRequired\":\r\n                        history.push('/Error')\r\n                        break;\r\n                    case \"fail\":\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }}\r\n            xhr.setRequestHeader('session'  , context)\r\n            xhr.setRequestHeader('toFollow'  , props.user_id)\r\n            xhr.setRequestHeader('state' , follow_state)\r\n            xhr.send()\r\n        }\r\n    })\r\n    return(\r\n        <button id=\"follow_button\" style = {props.style} ref = {el=>ref = el} onClick={follow_unfollow} disabled ={context !== sessionStorage.session || JSON.parse(localStorage.login_data).user_id === props.user_id} >{follow_state}</button>\r\n    )\r\n}\r\n\r\nexport {FollowButton}\r\n\r\nFollowButton.propTypes = {\r\n    user_id : PropTypes.string.isRequired,\r\n    style : PropTypes.object\r\n}"]},"metadata":{},"sourceType":"module"}