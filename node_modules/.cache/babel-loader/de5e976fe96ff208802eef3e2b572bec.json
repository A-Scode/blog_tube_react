{"ast":null,"code":"var _jsxFileName = \"D:\\\\Python files\\\\Start Django\\\\blog_tube\\\\frontend\\\\blog_tube\\\\src\\\\componenets\\\\appUserProfile.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport './statics/css/appUserProfile.css';\nimport { useParams } from 'react-router-dom';\nimport { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport appConfig from './statics/appConfig.json';\nimport PropTypes from 'prop-types';\nimport { Login_context } from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AppUserProfile = props => {\n  _s();\n\n  let {\n    user_id\n  } = useParams();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile_div\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pic backgorud\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: user_id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 11,\n    columnNumber: 13\n  }, this);\n};\n\n_s(AppUserProfile, \"AuzkGlVsOgEhg19MO5vFlxYxFGs=\", false, function () {\n  return [useParams];\n});\n\n_c = AppUserProfile;\nexport default AppUserProfile;\n\nconst Follow_button = props => {\n  _s2();\n\n  const [follow_state, set_follow_state] = useState('Follow');\n  var context = useContext(Login_context);\n  var ref = useRef();\n  const check_follower = useCallback(() => {\n    if (context === sessionStorage.session) {\n      let xhr = new XMLHttpRequest();\n      xhr.open('POST', appConfig.origin + 'backend_api/getFollowingList');\n\n      xhr.onreadystatechange = () => {\n        if (xhr.status === 200 && xhr.readyState === 4) {\n          let response = xhr.response;\n\n          switch (response.status) {\n            case \"success\":\n              response.followings.find(props.user_id) !== -1 ? set_follow_state('Following') : set_follow_state('Follow');\n              break;\n\n            case \"fail\":\n              check_follower();\n              break;\n\n            default:\n              break;\n          }\n        }\n      };\n    }\n  });\n  useEffect(() => {\n    const observer = new IntersectionObserver(entries => {\n      console.log(entries);\n    });\n    observer.observe(ref);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    ref: el => ref = el,\n    children: follow_state\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(Follow_button, \"7K4ucm5TSwzZzzvRIhXwfXUZZ3g=\");\n\n_c2 = Follow_button;\nFollow_button.propTypes = {\n  user_id: PropTypes.string.isRequired\n};\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AppUserProfile\");\n$RefreshReg$(_c2, \"Follow_button\");","map":{"version":3,"sources":["D:/Python files/Start Django/blog_tube/frontend/blog_tube/src/componenets/appUserProfile.js"],"names":["useParams","useCallback","useContext","useEffect","useRef","useState","appConfig","PropTypes","Login_context","AppUserProfile","props","user_id","Follow_button","follow_state","set_follow_state","context","ref","check_follower","sessionStorage","session","xhr","XMLHttpRequest","open","origin","onreadystatechange","status","readyState","response","followings","find","observer","IntersectionObserver","entries","console","log","observe","el","propTypes","string","isRequired"],"mappings":";;;;AAAA,OAAO,kCAAP;AACA,SAAQA,SAAR,QAAwB,kBAAxB;AACA,SAASC,WAAT,EAAsBC,UAAtB,EAAmCC,SAAnC,EAA8CC,MAA9C,EAAqDC,QAArD,QAAoE,OAApE;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,aAAT,QAA8B,QAA9B;;;AAEA,MAAMC,cAAc,GAAGC,KAAK,IAAG;AAAA;;AAC3B,MAAI;AAACC,IAAAA;AAAD,MAAYX,SAAS,EAAzB;AAEA,sBAAQ;AAAK,IAAA,SAAS,EAAG,aAAjB;AAAA,4BACJ;AAAK,MAAA,SAAS,EAAG;AAAjB;AAAA;AAAA;AAAA;AAAA,YADI,eAET;AAAA,gBAAKW;AAAL;AAAA;AAAA;AAAA;AAAA,YAFS;AAAA;AAAA;AAAA;AAAA;AAAA,UAAR;AAIH,CAPD;;GAAMF,c;UACcT,S;;;KADdS,c;AAQN,eAAeA,cAAf;;AAEA,MAAMG,aAAa,GAACF,KAAK,IAAE;AAAA;;AACvB,QAAM,CAACG,YAAD,EAAeC,gBAAf,IAAmCT,QAAQ,CAAC,QAAD,CAAjD;AACA,MAAIU,OAAO,GAAGb,UAAU,CAACM,aAAD,CAAxB;AACA,MAAIQ,GAAG,GAAGZ,MAAM,EAAhB;AAEA,QAAMa,cAAc,GAAIhB,WAAW,CAAC,MAAI;AACpC,QAAIc,OAAO,KAAKG,cAAc,CAACC,OAA/B,EAAuC;AACnC,UAAIC,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,MAAAA,GAAG,CAACE,IAAJ,CAAS,MAAT,EAAkBhB,SAAS,CAACiB,MAAV,GAAiB,8BAAnC;;AACAH,MAAAA,GAAG,CAACI,kBAAJ,GAAuB,MAAI;AAAC,YAAGJ,GAAG,CAACK,MAAJ,KAAe,GAAf,IAAsBL,GAAG,CAACM,UAAJ,KAAkB,CAA3C,EAA6C;AACrE,cAAIC,QAAQ,GAAGP,GAAG,CAACO,QAAnB;;AACA,kBAAQA,QAAQ,CAACF,MAAjB;AACI,iBAAK,SAAL;AACIE,cAAAA,QAAQ,CAACC,UAAT,CAAoBC,IAApB,CAAyBnB,KAAK,CAACC,OAA/B,MAA2C,CAAC,CAA5C,GACAG,gBAAgB,CAAC,WAAD,CADhB,GAC8BA,gBAAgB,CAAC,QAAD,CAD9C;AAEA;;AACJ,iBAAK,MAAL;AACIG,cAAAA,cAAc;AACd;;AACJ;AACI;AATR;AAWH;AAAC,OAbF;AAcH;AACJ,GAnBkC,CAAnC;AAsBAd,EAAAA,SAAS,CAAC,MAAI;AACV,UAAM2B,QAAQ,GAAG,IAAIC,oBAAJ,CAAyBC,OAAO,IAAE;AAC/CC,MAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACH,KAFgB,CAAjB;AAIAF,IAAAA,QAAQ,CAACK,OAAT,CAAiBnB,GAAjB;AAEH,GAPQ,EAOP,EAPO,CAAT;AAQA,sBACI;AAAQ,IAAA,GAAG,EAAIoB,EAAE,IAAEpB,GAAG,GAAGoB,EAAzB;AAAA,cAA+BvB;AAA/B;AAAA;AAAA;AAAA;AAAA,UADJ;AAGH,CAtCD;;IAAMD,a;;MAAAA,a;AAwCNA,aAAa,CAACyB,SAAd,GAA0B;AACtB1B,EAAAA,OAAO,EAAGJ,SAAS,CAAC+B,MAAV,CAAiBC;AADL,CAA1B","sourcesContent":["import './statics/css/appUserProfile.css'\r\nimport {useParams} from 'react-router-dom'\r\nimport { useCallback, useContext , useEffect ,useRef,useState} from 'react'\r\nimport appConfig from './statics/appConfig.json'\r\nimport PropTypes from 'prop-types'\r\nimport { Login_context } from '../App'\r\n\r\nconst AppUserProfile = props =>{\r\n    let {user_id} = useParams()\r\n\r\n    return (<div className = \"profile_div\">\r\n        <div className = \"pic backgorud\"></div>\r\n   <h1>{user_id}</h1>\r\n    </div>)\r\n}\r\nexport default AppUserProfile;\r\n\r\nconst Follow_button=props=>{\r\n    const [follow_state, set_follow_state] = useState('Follow')\r\n    var context = useContext(Login_context)\r\n    var ref = useRef()\r\n\r\n    const check_follower  = useCallback(()=>{\r\n        if (context === sessionStorage.session){\r\n            let xhr = new XMLHttpRequest()\r\n            xhr.open('POST' , appConfig.origin+'backend_api/getFollowingList')\r\n            xhr.onreadystatechange=()=>{if(xhr.status === 200 && xhr.readyState ===4){\r\n                let response = xhr.response\r\n                switch (response.status) {\r\n                    case \"success\":\r\n                        response.followings.find(props.user_id)!== -1?\r\n                        set_follow_state('Following'):set_follow_state('Follow')\r\n                        break;\r\n                    case \"fail\":\r\n                        check_follower()\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }}\r\n        }\r\n    })\r\n\r\n    \r\n    useEffect(()=>{\r\n        const observer = new IntersectionObserver(entries=>{\r\n            console.log(entries)\r\n        })\r\n        \r\n        observer.observe(ref)\r\n\r\n    },[])\r\n    return(\r\n        <button ref = {el=>ref = el} >{follow_state}</button>\r\n    )\r\n}\r\n\r\nFollow_button.propTypes = {\r\n    user_id : PropTypes.string.isRequired\r\n}"]},"metadata":{},"sourceType":"module"}