{"ast":null,"code":"var _jsxFileName = \"D:\\\\Python files\\\\Start Django\\\\blog_tube\\\\frontend\\\\blog_tube\\\\src\\\\componenets\\\\appUserProfile.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport './statics/css/appUserProfile.css';\nimport { useParams } from 'react-router-dom';\nimport { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useHistory, useRouteMatch } from 'react-router';\nimport appConfig from './statics/appConfig.json';\nimport PropTypes from 'prop-types';\nimport { Login_context } from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AppUserProfile = props => {\n  _s();\n\n  let {\n    user_id\n  } = useParams();\n  const history = useHistory();\n  useEffect(() => {\n    if (user_id === \"null\") history.goBack();\n  }, [user_id]);\n  const profile_bg = useMemo(() => /*#__PURE__*/_jsxDEV(\"svg\", {\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M0 147L21.5 151.8C43 156.7 86 166.3 128.8 164.7C171.7 163 214.3 150 257.2 150C300 150 343 163 385.8 165.3C428.7 167.7 471.3 159.3 514.2 146.7C557 134 600 117 642.8 116.7C685.7 116.3 728.3 132.7 771.2 143.3C814 154 857 159 878.5 161.5L900 164L900 0L878.5 0C857 0 814 0 771.2 0C728.3 0 685.7 0 642.8 0C600 0 557 0 514.2 0C471.3 0 428.7 0 385.8 0C343 0 300 0 257.2 0C214.3 0 171.7 0 128.8 0C86 0 43 0 21.5 0L0 0Z\",\n      fill: \"#2994a5\",\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"miter\",\n      style: \"transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1) 0s;\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 9\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile_div\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pic_bg\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: user_id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 13\n  }, this);\n};\n\n_s(AppUserProfile, \"aKIhck/pArIGImCfOUjQKy4HLWw=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = AppUserProfile;\nexport default AppUserProfile;\n\nconst FollowButton = props => {\n  _s2();\n\n  const [follow_state, set_follow_state] = useState('Follow');\n  var context = useContext(Login_context);\n  var ref = useRef();\n  const history = useHistory();\n  const check_follower = useCallback(() => {\n    if (context === sessionStorage.session) {\n      let xhr = new XMLHttpRequest();\n      xhr.open('POST', appConfig.origin + 'backend_api/getFollowingList');\n\n      xhr.onreadystatechange = () => {\n        if (xhr.status === 200 && xhr.readyState === 4) {\n          let response = JSON.parse(xhr.response);\n\n          switch (response.status) {\n            case \"success\":\n              response.followings.indexOf(props.user_id) !== -1 ? set_follow_state('Following') : set_follow_state('Follow');\n              break;\n\n            case \"loginRequired\":\n              history.push('/Error');\n              break;\n\n            case \"fail\":\n              check_follower();\n              break;\n\n            default:\n              break;\n          }\n        }\n      };\n\n      xhr.setRequestHeader('session', context);\n      xhr.send();\n    }\n  });\n  useEffect(() => {\n    const observer = new IntersectionObserver(entries => {\n      if (entries[0].intersectionRatio > 0) {\n        check_follower();\n      }\n    });\n    observer.observe(ref);\n  }, [ref, props.user_id]);\n  const follow_unfollow = useCallback(event => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (context === sessionStorage.session) {\n      let xhr = new XMLHttpRequest();\n      xhr.open('POST', appConfig.origin + 'backend_api/followUnfollow');\n\n      xhr.onreadystatechange = () => {\n        if (xhr.status === 200 && xhr.readyState === 4) {\n          let response = JSON.parse(xhr.response);\n\n          switch (response.status) {\n            case \"success\":\n              response.followings.indexOf(props.user_id) !== -1 ? set_follow_state('Following') : set_follow_state('Follow');\n              break;\n\n            case \"loginRequired\":\n              history.push('/Error');\n              break;\n\n            case \"fail\":\n              break;\n\n            default:\n              break;\n          }\n        }\n      };\n\n      xhr.setRequestHeader('session', context);\n      xhr.setRequestHeader('toFollow', props.user_id);\n      xhr.setRequestHeader('state', follow_state);\n      xhr.send();\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    id: \"follow_button\",\n    style: props.style,\n    ref: el => ref = el,\n    onClick: follow_unfollow,\n    disabled: context !== sessionStorage.session || JSON.parse(localStorage.login_data).user_id === props.user_id,\n    children: follow_state\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(FollowButton, \"rJA0fgoUFOOUmwU5D9/AhmTjjrQ=\", false, function () {\n  return [useHistory];\n});\n\n_c2 = FollowButton;\nexport { FollowButton };\nFollowButton.propTypes = {\n  user_id: PropTypes.string.isRequired,\n  style: PropTypes.object\n};\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AppUserProfile\");\n$RefreshReg$(_c2, \"FollowButton\");","map":{"version":3,"sources":["D:/Python files/Start Django/blog_tube/frontend/blog_tube/src/componenets/appUserProfile.js"],"names":["useParams","useCallback","useContext","useEffect","useMemo","useRef","useState","useHistory","useRouteMatch","appConfig","PropTypes","Login_context","AppUserProfile","props","user_id","history","goBack","profile_bg","FollowButton","follow_state","set_follow_state","context","ref","check_follower","sessionStorage","session","xhr","XMLHttpRequest","open","origin","onreadystatechange","status","readyState","response","JSON","parse","followings","indexOf","push","setRequestHeader","send","observer","IntersectionObserver","entries","intersectionRatio","observe","follow_unfollow","event","stopPropagation","preventDefault","style","el","localStorage","login_data","propTypes","string","isRequired","object"],"mappings":"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","sourcesContent":["import './statics/css/appUserProfile.css'\r\nimport {useParams} from 'react-router-dom'\r\nimport { useCallback, useContext , useEffect ,useMemo,useRef,useState} from 'react'\r\nimport { useHistory, useRouteMatch } from 'react-router'\r\nimport appConfig from './statics/appConfig.json'\r\nimport PropTypes from 'prop-types'\r\nimport { Login_context } from '../App'\r\n\r\nconst AppUserProfile = props =>{\r\n    let {user_id} = useParams()\r\n    const history = useHistory()\r\n    useEffect(()=>{\r\n        if(user_id === \"null\")history.goBack()\r\n    }, [user_id])\r\n\r\n    const profile_bg = useMemo(()=>(\r\n        <svg>\r\n        <path d=\"M0 147L21.5 151.8C43 156.7 86 166.3 128.8 164.7C171.7 163 214.3 150 257.2 150C300 150 343 163 385.8 165.3C428.7 167.7 471.3 159.3 514.2 146.7C557 134 600 117 642.8 116.7C685.7 116.3 728.3 132.7 771.2 143.3C814 154 857 159 878.5 161.5L900 164L900 0L878.5 0C857 0 814 0 771.2 0C728.3 0 685.7 0 642.8 0C600 0 557 0 514.2 0C471.3 0 428.7 0 385.8 0C343 0 300 0 257.2 0C214.3 0 171.7 0 128.8 0C86 0 43 0 21.5 0L0 0Z\" fill=\"#2994a5\" stroke-linecap=\"round\"\r\n         stroke-linejoin=\"miter\" style=\"transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1) 0s;\"></path>\r\n         </svg>\r\n    ))\r\n    \r\n    return (<div className = \"profile_div\">\r\n        <div className = \"pic_bg\"></div>\r\n   <h1>{user_id}</h1>\r\n    </div>)\r\n}\r\nexport default AppUserProfile;\r\n\r\nconst FollowButton=props=>{\r\n    const [follow_state, set_follow_state] = useState('Follow')\r\n    var context = useContext(Login_context)\r\n    var ref = useRef()\r\n    const history = useHistory()\r\n\r\n    const check_follower  = useCallback(()=>{\r\n        if (context === sessionStorage.session){\r\n            let xhr = new XMLHttpRequest()\r\n            xhr.open('POST' , appConfig.origin+'backend_api/getFollowingList')\r\n            xhr.onreadystatechange=()=>{if(xhr.status === 200 && xhr.readyState ===4){\r\n                let response = JSON.parse(xhr.response)\r\n                \r\n                switch (response.status) {\r\n                    case \"success\":\r\n                        response.followings.indexOf(props.user_id)!== -1?\r\n                        set_follow_state('Following'):set_follow_state('Follow')\r\n                        \r\n                        break;\r\n                    case \"loginRequired\":\r\n                        history.push('/Error')\r\n                        break;\r\n                    case \"fail\":\r\n                        check_follower()\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }}\r\n            xhr.setRequestHeader('session'  , context)\r\n            xhr.send()\r\n        }\r\n    })\r\n\r\n    \r\n    useEffect(()=>{\r\n        const observer = new IntersectionObserver(entries=>{\r\n            if (entries[0].intersectionRatio > 0){\r\n                check_follower()\r\n            }\r\n        })\r\n        observer.observe(ref)\r\n\r\n    },[ref,props.user_id])\r\n\r\n    const follow_unfollow = useCallback((event)=>{\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n        if (context === sessionStorage.session){\r\n            let xhr = new XMLHttpRequest()\r\n            xhr.open('POST' , appConfig.origin+'backend_api/followUnfollow')\r\n            xhr.onreadystatechange=()=>{if(xhr.status === 200 && xhr.readyState ===4){\r\n                let response = JSON.parse(xhr.response)\r\n                switch (response.status) {\r\n                    case \"success\":\r\n                        response.followings.indexOf(props.user_id)!== -1?\r\n                        set_follow_state('Following'):set_follow_state('Follow')\r\n                        break;\r\n                    case \"loginRequired\":\r\n                        history.push('/Error')\r\n                        break;\r\n                    case \"fail\":\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }}\r\n            xhr.setRequestHeader('session'  , context)\r\n            xhr.setRequestHeader('toFollow'  , props.user_id)\r\n            xhr.setRequestHeader('state' , follow_state)\r\n            xhr.send()\r\n        }\r\n    })\r\n    return(\r\n        <button id=\"follow_button\" style = {props.style} ref = {el=>ref = el} onClick={follow_unfollow} disabled ={context !== sessionStorage.session || JSON.parse(localStorage.login_data).user_id === props.user_id} >{follow_state}</button>\r\n    )\r\n}\r\n\r\nexport {FollowButton}\r\n\r\nFollowButton.propTypes = {\r\n    user_id : PropTypes.string.isRequired,\r\n    style : PropTypes.object\r\n}"]},"metadata":{},"sourceType":"module"}