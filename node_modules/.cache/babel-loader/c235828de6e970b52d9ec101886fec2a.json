{"ast":null,"code":"var _jsxFileName = \"D:\\\\Python files\\\\Start Django\\\\blog_tube\\\\frontend\\\\blog_tube\\\\src\\\\componenets\\\\appBlogians.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport './statics/css/appBlogians.css';\nimport appConfig from './statics/appConfig.json';\nimport { useEffect, useState, useRef, useContext, useCallback } from 'react';\nimport blogiansIcon from \"./statics/images/blogians.svg\";\nimport PropTypes from 'prop-types';\nimport { Login_context } from '../App';\nimport { useLocation, Link, Redirect, useRouteMatch, useHistory } from 'react-router-dom';\nimport { CacheSwitch as Switch, CacheRoute as Route } from 'react-router-cache-route';\nimport AppUserProfile, { FollowButton } from './appUserProfile';\nimport UserImage from './userImage';\nimport { parseHTML } from 'jquery';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar AppBlogians = props => {\n  _s();\n\n  const {\n    path\n  } = useRouteMatch();\n  const [user_list, set_user_list] = useState([]);\n  var ref_list = useRef([]);\n  useEffect(() => {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', appConfig.origin + \"backend_api/userlist\");\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState === 4 && xhr.status === 200) {\n        let response = JSON.parse(xhr.response);\n\n        if (response.status == 'success') {\n          ref_list.current['list'] = response.userslist;\n          set_user_list(response.userslist);\n        } else if (response.status === 'fail') {\n          set_user_list([]);\n        }\n      }\n    };\n\n    xhr.send();\n    window.addEventListener('resize', hide_preview, true);\n    return () => window.removeEventListener('resize', hide_preview, true);\n\n    if (path === '/Blogians') {\n      hide_preview();\n    }\n  }, []);\n\n  function search(event) {\n    const target = event.target;\n    let data = event.nativeEvent.data;\n\n    if (\"?\\\"':;!*()\".search(data) != -1) {\n      target.setCustomValidity(\"username does not contain ?!:;#$%^&*\\\"'() \");\n      target.value = target.value.slice(0, target.value.length - 1);\n      target.reportValidity();\n    } else {\n      target.setCustomValidity(\"\");\n      target.reportValidity();\n      let filtered_list = [];\n\n      for (var user of ref_list.current['list']) {\n        if (user.user_name.search(target.value) != -1) {\n          filtered_list.push(user);\n        }\n\n        filtered_list.sort((a, b) => b.followers_count - a.followers_count);\n        set_user_list(filtered_list);\n      }\n    }\n  }\n\n  const mq = window.matchMedia('(min-width : 768px)');\n  let ref = useRef({});\n  const [user_id, set_user_id] = useState(null);\n\n  function show_preview(uid) {\n    set_user_id(uid);\n\n    if (mq.matches) {\n      ref.current['preview_window'].style.display = \"block\";\n      ref.current['blogians_window'].style.gridColumn = \"1 / span 1\";\n      set_follow('none');\n    }\n  }\n\n  function hide_preview() {\n    ref.current['preview_window'].style.display = \"none\";\n    ref.current['blogians_window'].style.gridColumn = \"1 / span 2\";\n    set_follow('block');\n  }\n\n  let history = useHistory();\n  const [follow, set_follow] = useState('block');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"holder\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"blogians\",\n      ref: el => ref.current['blogians_window'] = el,\n      onDoubleClick: () => hide_preview(),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"blogiansInput\",\n        onInput: event => search(event),\n        style: {\n          backgroundImage: `url(${blogiansIcon})`\n        },\n        type: \"text\",\n        placeholder: \"Search Blogians\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"allBlogians\",\n        children: user_list.map(item => {\n          return /*#__PURE__*/_jsxDEV(BlogiansMiniProfile, {\n            follow: follow,\n            user_details: item,\n            onClick: uid => show_preview(uid),\n            to: `${path}/profile_small/${item.user_id}`\n          }, item.user_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 32\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile_preview\",\n      ref: el => ref.current['preview_window'] = el,\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: `${path}/profile_small/:user_id`,\n        children: mq.matches ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(AppUserProfile, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 21\n          }, this), follow === 'none' ? /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"FullpageProfile\",\n            onClick: () => history.push(`/Profile/${user_id}`),\n            children: \" Full Profile \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 38\n          }, this) : null]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Redirect, {\n          to: `/Profile/${user_id}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 23\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AppBlogians, \"+RWjtm8i3TDac9eKmeuWxIQ8ty8=\", false, function () {\n  return [useRouteMatch, useHistory];\n});\n\n_c = AppBlogians;\n\nfunction BlogiansMiniProfile(props) {\n  _s2();\n\n  const [followers, set_followers] = useState(props.user_details.followers_count);\n  const change_followers = useCallback(state => {\n    if (state) set_followers(followers + 1);else set_followers(followers - 1);\n  });\n  return /*#__PURE__*/_jsxDEV(Link, {\n    className: \"links\",\n    onClick: () => props.onClick(props.user_details.user_id),\n    style: {\n      textDecoration: 'none',\n      width: '100%',\n      display: 'flex',\n      maxWidth: \"1000px\",\n      justifyContent: 'center',\n      placeItems: 'center'\n    },\n    to: props.to,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"miniprofile\",\n      children: [/*#__PURE__*/_jsxDEV(UserImage, {\n        width: \"50px\",\n        height: \"50px\",\n        to: `/Profile/${props.user_details.user_id}`,\n        style: {\n          backgroundColor: \"rgb(255, 255, 255)\",\n          margin: \"auto\",\n          gridArea: \"photo\",\n          borderWidth: \"2px\"\n        },\n        user_id: props.user_details.user_id,\n        onClick: () => null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile_name\",\n        children: props.user_details.user_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"follower\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"follower_count\",\n          style: {\n            backgroundImage: `url(${blogiansIcon})`\n          },\n          children: [\"  \", followers > 0 ? followers : \"No\", \" Followers \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(FollowButton, {\n          change_followers: change_followers,\n          user_id: props.user_details.user_id,\n          style: {\n            marginRight: \"10px\",\n            marginLeft: 'auto',\n            display: props.follow\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }, this), props.user_details.total_blogs > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tag\",\n        children: \"\\uD83C\\uDFF9Blogger\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 50\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(BlogiansMiniProfile, \"MLcQhpyIOnMLVV1FEfEskxJBK14=\");\n\n_c2 = BlogiansMiniProfile;\nBlogiansMiniProfile.propTypes = {\n  user_details: PropTypes.object.isRequired,\n  to: PropTypes.string.isRequired\n};\nexport { BlogiansMiniProfile };\nexport default AppBlogians;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AppBlogians\");\n$RefreshReg$(_c2, \"BlogiansMiniProfile\");","map":{"version":3,"sources":["D:/Python files/Start Django/blog_tube/frontend/blog_tube/src/componenets/appBlogians.js"],"names":["appConfig","useEffect","useState","useRef","useContext","useCallback","PropTypes","Login_context","useLocation","Link","Redirect","useRouteMatch","useHistory","CacheSwitch","Switch","CacheRoute","Route","AppUserProfile","FollowButton","UserImage","parseHTML","AppBlogians","props","path","user_list","set_user_list","ref_list","xhr","XMLHttpRequest","open","origin","onreadystatechange","readyState","status","response","JSON","parse","current","userslist","send","window","addEventListener","hide_preview","removeEventListener","search","event","target","data","nativeEvent","setCustomValidity","value","slice","length","reportValidity","filtered_list","user","user_name","push","sort","a","b","followers_count","mq","matchMedia","ref","user_id","set_user_id","show_preview","uid","matches","style","display","gridColumn","set_follow","history","follow","el","backgroundImage","blogiansIcon","map","item","BlogiansMiniProfile","followers","set_followers","user_details","change_followers","state","onClick","textDecoration","width","maxWidth","justifyContent","placeItems","to","backgroundColor","margin","gridArea","borderWidth","marginRight","marginLeft","total_blogs","propTypes","object","isRequired","string"],"mappings":"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","sourcesContent":["import './statics/css/appBlogians.css'\r\nimport appConfig from './statics/appConfig.json'\r\nimport {useEffect, useState ,useRef , useContext, useCallback} from 'react'\r\nimport blogiansIcon from './statics/images/blogians.svg'\r\nimport PropTypes from 'prop-types'\r\nimport {Login_context} from '../App'\r\nimport { useLocation , Link ,Redirect, useRouteMatch , useHistory} from 'react-router-dom'\r\nimport { CacheSwitch as Switch, CacheRoute as Route} from 'react-router-cache-route'\r\nimport AppUserProfile, { FollowButton } from './appUserProfile'\r\nimport UserImage from './userImage'\r\nimport { parseHTML } from 'jquery'\r\n\r\n\r\nvar AppBlogians = props=>{\r\n    const {path} = useRouteMatch()\r\n\r\n    const [user_list , set_user_list] = useState([])\r\n\r\n    var ref_list = useRef([]) ;\r\n\r\n    useEffect(()=>{\r\n    var xhr = new XMLHttpRequest()\r\n    xhr.open('GET' , appConfig.origin + \"backend_api/userlist\")\r\n    xhr.onreadystatechange = ()=>{\r\n        if (xhr.readyState === 4 && xhr.status === 200){\r\n            let response = JSON.parse(xhr.response)\r\n\r\n            if (response.status == 'success'){\r\n                ref_list.current['list'] = response.userslist\r\n                set_user_list(response.userslist)\r\n            }else if (response.status === 'fail'){\r\n                set_user_list([])\r\n            }\r\n\r\n        }\r\n    }\r\n    xhr.send()\r\n\r\n    window.addEventListener('resize' , hide_preview , true)\r\n    return ()=>window.removeEventListener('resize' , hide_preview , true)\r\n    if (path === '/Blogians'){\r\n        hide_preview()\r\n    }\r\n},[])\r\n\r\n    function search(event){\r\n        const target = event.target\r\n        let data = event.nativeEvent.data\r\n\r\n        if ( \"?\\\"':;!*()\".search(data) != -1){\r\n            target.setCustomValidity(\"username does not contain ?!:;#$%^&*\\\"'() \")\r\n            target.value = target.value.slice(0 , target.value.length -1)\r\n            target.reportValidity()\r\n        }else{\r\n            target.setCustomValidity(\"\")\r\n            target.reportValidity()\r\n            \r\n            let filtered_list = []\r\n            \r\n            for (var user of ref_list.current['list']){\r\n                if(user.user_name.search(target.value) != -1){\r\n                    filtered_list.push(user)\r\n                }\r\n            filtered_list.sort((a,b)=>b.followers_count - a.followers_count)\r\n            set_user_list(filtered_list)\r\n            \r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    const mq = window.matchMedia('(min-width : 768px)')\r\n\r\n\r\n    let ref = useRef({})\r\n\r\n    const [user_id , set_user_id]= useState(null)\r\n    \r\n    function show_preview(uid){\r\n        set_user_id(uid)\r\n        if (mq.matches){\r\n            ref.current['preview_window'].style.display = \"block\"\r\n            ref.current['blogians_window'].style.gridColumn = \"1 / span 1\"\r\n            set_follow('none')\r\n        }\r\n    }\r\n    function hide_preview(){\r\n        \r\n        ref.current['preview_window'].style.display = \"none\"\r\n        ref.current['blogians_window'].style.gridColumn = \"1 / span 2\"\r\n        \r\n        set_follow('block')\r\n    }\r\n    let history = useHistory()\r\n    const [follow ,set_follow] = useState('block')\r\n\r\n    return (\r\n    <div className= \"holder\">\r\n\r\n    <div  className=\"blogians\" ref = {el=>ref.current['blogians_window']=el} onDoubleClick= {()=>hide_preview()}>\r\n                <input className = \"blogiansInput\" onInput= {event=>search(event)} style= {{backgroundImage:`url(${blogiansIcon})`}} type = \"text\" placeholder = \"Search Blogians\" />\r\n                <div className=\"allBlogians\">\r\n                    {user_list.map(item=>{\r\n                        return(<BlogiansMiniProfile follow={follow} key = {item.user_id} user_details = {item}  onClick = {(uid)=>show_preview(uid)} to={`${path}/profile_small/${item.user_id}`} />)\r\n                    })}\r\n                </div>\r\n            </div>\r\n            <div className=\"profile_preview\" ref  = {el=>ref.current['preview_window']=el}>   \r\n                <Route exact  path = {`${path}/profile_small/:user_id`}>\r\n                    {mq.matches?(<>\r\n                    <AppUserProfile />\r\n                    {follow==='none'?<button id = \"FullpageProfile\"  onClick={()=>history.push(`/Profile/${user_id}`)}> Full Profile </button>:null}\r\n                    </>)\r\n                    : <Redirect to = {`/Profile/${user_id}`} />}\r\n                </Route>\r\n                \r\n\r\n            </div>\r\n            </div>\r\n    )\r\n}\r\n\r\n\r\nfunction BlogiansMiniProfile(props){\r\n    const [followers ,set_followers] = useState(props.user_details.followers_count)\r\n\r\n    const change_followers = useCallback((state)=>{\r\n        if (state)set_followers(followers+1)\r\n        else set_followers(followers -1)\r\n    })\r\n\r\n    return(\r\n        <Link className = \"links\" onClick = {()=>props.onClick(props.user_details.user_id)} style = {{textDecoration:'none',width : '100%',display:'flex', maxWidth: \"1000px\", justifyContent:'center',placeItems:'center'}} to = {props.to} >\r\n        <div className=\"miniprofile\"  >\r\n            <UserImage  width = \"50px\" height = \"50px\" to = {`/Profile/${props.user_details.user_id}`}\r\n             style = {{backgroundColor : \"rgb(255, 255, 255)\",\r\n                        margin:\"auto\",\r\n                        gridArea : \"photo\" ,\r\n                        borderWidth : \"2px\"}} \r\n                        \r\n                user_id = {props.user_details.user_id}\r\n                onClick = {()=>null} />\r\n            <div className=\"profile_name\" >\r\n                {props.user_details.user_name}\r\n                \r\n                </div>\r\n            <div className=\"follower\" >\r\n                <div className=\"follower_count\" style= {{backgroundImage : `url(${blogiansIcon})`}}   >  {followers > 0 ?followers:\"No\"} Followers </div>\r\n            <FollowButton change_followers = {change_followers}  user_id = {props.user_details.user_id} style = {{marginRight: \"10px\" , marginLeft: 'auto',display:props.follow}}  /></div>\r\n            {props.user_details.total_blogs > 0 ?<div className=\"tag\">🏹Blogger</div>:null}\r\n        </div>\r\n        </Link>\r\n    )\r\n}\r\n\r\nBlogiansMiniProfile.propTypes = {\r\n    user_details : PropTypes.object.isRequired,\r\n    to : PropTypes.string.isRequired\r\n}\r\n\r\nexport {BlogiansMiniProfile}\r\n\r\nexport  default AppBlogians;\r\n"]},"metadata":{},"sourceType":"module"}