{"ast":null,"code":"var _jsxFileName = \"D:\\\\Python files\\\\Start Django\\\\blog_tube\\\\frontend\\\\blog_tube\\\\src\\\\componenets\\\\userImage.js\",\n    _s = $RefreshSig$();\n\nimport PropTypes from 'prop-types';\nimport unkownUser from \"./statics/images/unkownUser.svg\";\nimport appConfig from './statics/appConfig.json';\nimport { Link } from 'react-router-dom';\nimport { useEffect, useRef, useContext, useState } from 'react';\nimport { Login_context } from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nlet UserImage = props => {\n  _s();\n\n  var session = useContext(Login_context);\n  let ref = useRef(\"\");\n  const [div_style, set_div_style] = useState({\n    width: props.width,\n    minWidth: props.width,\n    height: props.height,\n    borderRadius: '100%',\n    borderStyle: 'inset',\n    backgroundColor: \"rgb(255 255 255 / 55%)\",\n    boxShadow: \"0px 0px 8px 3px #3b3b3b8c\",\n    borderWidth: '4px',\n    borderColor: '#0334dd',\n    backgroundSize: `contain`,\n    backgroundPosition: 'center',\n    alignSelf: 'center',\n    justifySelf: 'center',\n    backgroundRepeat: 'no-repeat'\n  });\n  var flag;\n\n  function load_image() {\n    if (flag === false) {\n      if (props.user_id === \"unknown\") {\n        set_div_style({ ...div_style,\n          ...props.style,\n          backgroundImage: `url(${unkownUser})`\n        });\n        let to = '/Signup';\n        flag = true;\n      } else {\n        let xhr = new XMLHttpRequest();\n        xhr.open('POST', appConfig.origin + \"backend_api/getprofilephoto\");\n        xhr.responseType = 'blob';\n\n        xhr.onreadystatechange = () => {\n          if (xhr.readyState === 4 && xhr.status === 200) {\n            let response = xhr.response;\n            set_div_style({ ...div_style,\n              ...props.style,\n              backgroundImage: `url(${URL.createObjectURL(response)})`\n            });\n            flag = true;\n          }\n        };\n\n        xhr.setRequestHeader(\"session\", session ? session : '');\n        xhr.setRequestHeader(\"photouid\", props.user_id);\n        xhr.send();\n      }\n    }\n  }\n\n  useEffect(() => {\n    var observer = new IntersectionObserver((entries, observer) => {\n      if (entries[0].intersectionRatio > 0) {\n        load_image();\n      }\n    });\n    observer.observe(ref.current);\n    flag = false;\n    set_div_style({ ...div_style,\n      ...props.style\n    });\n  }, [props.user_id]);\n  return /*#__PURE__*/_jsxDEV(Link, {\n    to: props.to,\n    ref: el => ref.current = el,\n    style: div_style,\n    onClick: () => props.onClick()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 13\n  }, this);\n};\n\n_s(UserImage, \"PpUnIpr8/F48yiK5LX6xt3F4pwA=\");\n\n_c = UserImage;\nUserImage.propTypes = {\n  width: PropTypes.string.isRequired,\n  height: PropTypes.string.isRequired,\n  user_id: PropTypes.string.isRequired,\n  to: PropTypes.string.isRequired,\n  style: PropTypes.object\n};\nexport default UserImage;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserImage\");","map":{"version":3,"sources":["D:/Python files/Start Django/blog_tube/frontend/blog_tube/src/componenets/userImage.js"],"names":["PropTypes","appConfig","Link","useEffect","useRef","useContext","useState","Login_context","UserImage","props","session","ref","div_style","set_div_style","width","minWidth","height","borderRadius","borderStyle","backgroundColor","boxShadow","borderWidth","borderColor","backgroundSize","backgroundPosition","alignSelf","justifySelf","backgroundRepeat","flag","load_image","user_id","style","backgroundImage","unkownUser","to","xhr","XMLHttpRequest","open","origin","responseType","onreadystatechange","readyState","status","response","URL","createObjectURL","setRequestHeader","send","observer","IntersectionObserver","entries","intersectionRatio","observe","current","el","onClick","propTypes","string","isRequired","object"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types'\r\nimport unkownUser from './statics/images/unkownUser.svg'\r\nimport appConfig from './statics/appConfig.json'\r\nimport {Link } from 'react-router-dom'\r\nimport { useEffect, useRef ,useContext , useState} from 'react'\r\nimport {Login_context} from '../App'\r\nlet UserImage = props=>{\r\n    var session  = useContext(Login_context)\r\n    let ref = useRef(\"\")\r\n    const [ div_style , set_div_style] = useState({\r\n        width        : props.width,\r\n        minWidth        : props.width,\r\n        height       : props.height,\r\n        borderRadius : '100%',\r\n        borderStyle  : 'inset',\r\n        backgroundColor: \"rgb(255 255 255 / 55%)\",\r\n        boxShadow: \"0px 0px 8px 3px #3b3b3b8c\",\r\n        borderWidth  : '4px',\r\n        borderColor  : '#0334dd',\r\n        backgroundSize : `contain`,\r\n        backgroundPosition:'center',\r\n        alignSelf : 'center',\r\n        justifySelf : 'center',\r\n        backgroundRepeat :'no-repeat'\r\n    })\r\n    var flag;\r\n\r\n    function load_image(){\r\n        if (flag === false){\r\n        if (props.user_id === \"unknown\"){\r\n            set_div_style({...div_style , ...props.style ,backgroundImage : `url(${unkownUser})` })\r\n            let to = '/Signup'\r\n            flag = true\r\n        }else{\r\n                let xhr = new XMLHttpRequest()\r\n    xhr.open('POST', appConfig.origin + \"backend_api/getprofilephoto\")\r\n    xhr.responseType = 'blob'\r\n    xhr.onreadystatechange = ()=>{\r\n        if (xhr.readyState === 4 && xhr.status === 200){\r\n            let response = xhr.response\r\n            set_div_style({...div_style , ...props.style ,backgroundImage : `url(${URL.createObjectURL(response)})` })\r\n            flag = true\r\n        }\r\n    }\r\n    xhr.setRequestHeader(\"session\" , session?session:'')\r\n    xhr.setRequestHeader(\"photouid\" , props.user_id)\r\n    xhr.send()\r\n        }}\r\n    }\r\n    \r\n\r\n    useEffect(()=>{\r\n        var observer = new IntersectionObserver((entries,observer)=>{\r\n            if (entries[0].intersectionRatio > 0){\r\n                load_image()\r\n            }\r\n        })\r\n        observer.observe(ref.current)\r\n        flag = false;\r\n        set_div_style({...div_style , ...props.style})\r\n},[props.user_id])\r\n\r\n    return  <Link to = {props.to} ref ={el =>ref.current =el}  style = {div_style} onClick= {()=>props.onClick()} ></Link>\r\n}\r\n\r\n\r\nUserImage.propTypes = {\r\n    width : PropTypes.string.isRequired,\r\n    height : PropTypes.string.isRequired,\r\n    user_id : PropTypes.string.isRequired,\r\n    to : PropTypes.string.isRequired,\r\n    style : PropTypes.object\r\n}\r\n\r\nexport default UserImage;"]},"metadata":{},"sourceType":"module"}