{"ast":null,"code":"var _jsxFileName = \"D:\\\\Python files\\\\Start Django\\\\blog_tube\\\\frontend\\\\blog_tube\\\\src\\\\componenets\\\\appBlogians.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport './statics/css/appBlogians.css';\nimport appConfig from './statics/appConfig.json';\nimport { useEffect, useState, useRef, useContext } from 'react';\nimport blogiansIcon from \"./statics/images/blogians.svg\";\nimport PropTypes from 'prop-types';\nimport { Login_context } from '../App';\nimport { useLocation, Link, Route, Switch, BrowserRouter as Router, Redirect } from 'react-router-dom';\nimport AppUserProfile from './appUserProfile';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar AppBlogians = props => {\n  _s();\n\n  const [user_list, set_user_list] = useState([]);\n  var ref_list = useRef([]);\n  useEffect(() => {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', appConfig.origin + \"backend_api/userlist\");\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState == 4 && xhr.status == 200) {\n        let response = JSON.parse(xhr.response);\n\n        if (response.status == 'success') {\n          ref_list.current['list'] = response.userslist;\n          set_user_list(response.userslist);\n        } else if (response.status == 'fail') {\n          set_user_list([]);\n        }\n      }\n    };\n\n    xhr.send();\n  }, []);\n\n  function search(event) {\n    const target = event.target;\n    let data = event.nativeEvent.data;\n\n    if (\"?\\\"':;!*()\".search(data) != -1) {\n      target.setCustomValidity(\"username does not contain ?!:;#$%^&*\\\"'() \");\n      target.value = target.value.slice(0, target.value.length - 1);\n      target.reportValidity();\n    } else {\n      target.setCustomValidity(\"\");\n      target.reportValidity();\n      let filtered_list = [];\n\n      for (var user of ref_list.current['list']) {\n        if (user.user_name.search(target.value) != -1) {\n          filtered_list.push(user);\n        }\n\n        filtered_list.sort((a, b) => b.followers_count - a.followers_count);\n        set_user_list(filtered_list);\n      }\n    }\n  }\n\n  let location = useLocation();\n  const mq = window.matchMedia('(min-width : 768px)');\n  console.log(mq.matches);\n  let ref = useRef({});\n\n  function show_preview() {\n    if (mq.matches) {\n      ref.current['preview_window'].style.display = \"block\";\n      ref.current['blogians_window'].style.gridColumn = \"1 / span 1\";\n    }\n  }\n\n  function hide_preview() {\n    if (mq.matches) {\n      console.log(\"hide\");\n      ref.current['preview_window'].style.display = \"none\";\n      ref.current['blogians_window'].style.gridColumn = \"0 / span 0\";\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"holder\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"blogians\",\n      ref: el => ref.current['blogians_window'] = el,\n      onDoubleClick: () => hide_preview(),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"blogiansInput\",\n        onInput: event => search(event),\n        style: {\n          backgroundImage: `url(${blogiansIcon})`\n        },\n        type: \"text\",\n        placeholder: \"Search Blogians\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"allBlogians\",\n        children: user_list.map(item => {\n          return /*#__PURE__*/_jsxDEV(BlogiansMiniProfile, {\n            user_details: item,\n            onClick: () => show_preview()\n          }, item.user_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 32\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile_preview\",\n      ref: el => ref.current['preview_window'] = el,\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: `/Blogians/:user_id`,\n          children: mq.matches ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(AppUserProfile, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"FullpageProfile\",\n              children: \" Fullpage \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(Redirect, {\n            to: \"/Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 23\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 13\n  }, this);\n};\n\n_s(AppBlogians, \"aykkJFiYuYbS4tIIMSomoEl8zEg=\", false, function () {\n  return [useLocation];\n});\n\n_c = AppBlogians;\n\nfunction BlogiansMiniProfile(props) {\n  _s2();\n\n  let location = useLocation();\n  let ref = useRef({});\n  const session = useContext(Login_context);\n  let xhr = new XMLHttpRequest();\n  xhr.open('POST', appConfig.origin + \"backend_api/getprofilephoto\");\n  xhr.responseType = 'blob';\n  useEffect(() => {\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState == 4 && xhr.status == 200) {\n        ref.current['profile_photo'].style.backgroundImage = `url(${URL.createObjectURL(xhr.response)})`;\n      }\n    };\n\n    xhr.setRequestHeader(\"session\", session);\n    xhr.setRequestHeader(\"photouid\", JSON.stringify(props.user_details.user_id));\n    xhr.send();\n  }, [ref]);\n  return /*#__PURE__*/_jsxDEV(Link, {\n    onClick: () => props.onClick(),\n    style: {\n      textDecoration: 'none',\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      placeItems: 'center'\n    },\n    to: `/Blogians/${props.user_details.user_id}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"miniprofile\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profilePhoto\",\n        ref: el => ref.current['profile_photo'] = el\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile_name\",\n        children: props.user_details.user_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"follower_count\",\n        style: {\n          backgroundImage: `url(${blogiansIcon})`\n        },\n        children: [props.user_details.followers_count > 0 ? props.user_details.followers_count : \"No\", \" Followers\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }, this), props.user_details.total_blogs > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tag\",\n        children: \"\\uD83C\\uDFF9Blogger\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 50\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(BlogiansMiniProfile, \"ryg9rAS/NjKLJwhed9F7wHqFsF8=\", false, function () {\n  return [useLocation];\n});\n\n_c2 = BlogiansMiniProfile;\nBlogiansMiniProfile.propTypes = {\n  user_details: PropTypes.object.isRequired\n};\nexport default AppBlogians;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AppBlogians\");\n$RefreshReg$(_c2, \"BlogiansMiniProfile\");","map":{"version":3,"sources":["D:/Python files/Start Django/blog_tube/frontend/blog_tube/src/componenets/appBlogians.js"],"names":["appConfig","useEffect","useState","useRef","useContext","PropTypes","Login_context","useLocation","Link","Route","Switch","BrowserRouter","Router","Redirect","AppUserProfile","AppBlogians","props","user_list","set_user_list","ref_list","xhr","XMLHttpRequest","open","origin","onreadystatechange","readyState","status","response","JSON","parse","current","userslist","send","search","event","target","data","nativeEvent","setCustomValidity","value","slice","length","reportValidity","filtered_list","user","user_name","push","sort","a","b","followers_count","location","mq","window","matchMedia","console","log","matches","ref","show_preview","style","display","gridColumn","hide_preview","el","backgroundImage","blogiansIcon","map","item","user_id","BlogiansMiniProfile","session","responseType","URL","createObjectURL","setRequestHeader","stringify","user_details","onClick","textDecoration","width","justifyContent","placeItems","total_blogs","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import './statics/css/appBlogians.css'\r\nimport appConfig from './statics/appConfig.json'\r\nimport {useEffect, useState ,useRef , useContext} from 'react'\r\nimport blogiansIcon from './statics/images/blogians.svg'\r\nimport PropTypes from 'prop-types'\r\nimport {Login_context} from '../App'\r\nimport { useLocation , Link , Route , Switch,BrowserRouter as Router , Redirect} from 'react-router-dom'\r\nimport AppUserProfile from './appUserProfile'\r\n\r\n\r\nvar AppBlogians = props=>{\r\n    const [user_list , set_user_list] = useState([])\r\n\r\n    var ref_list = useRef([]) ;\r\n\r\n    useEffect(()=>{\r\n    var xhr = new XMLHttpRequest()\r\n    xhr.open('GET' , appConfig.origin + \"backend_api/userlist\")\r\n    xhr.onreadystatechange = ()=>{\r\n        if (xhr.readyState == 4 && xhr.status == 200){\r\n            let response = JSON.parse(xhr.response)\r\n\r\n            if (response.status == 'success'){\r\n                ref_list.current['list'] = response.userslist\r\n                set_user_list(response.userslist)\r\n            }else if (response.status == 'fail'){\r\n                set_user_list([])\r\n            }\r\n\r\n        }\r\n    }\r\n    xhr.send()\r\n},[])\r\n\r\n    function search(event){\r\n        const target = event.target\r\n        let data = event.nativeEvent.data\r\n\r\n        if ( \"?\\\"':;!*()\".search(data) != -1){\r\n            target.setCustomValidity(\"username does not contain ?!:;#$%^&*\\\"'() \")\r\n            target.value = target.value.slice(0 , target.value.length -1)\r\n            target.reportValidity()\r\n        }else{\r\n            target.setCustomValidity(\"\")\r\n            target.reportValidity()\r\n            \r\n            let filtered_list = []\r\n            \r\n            for (var user of ref_list.current['list']){\r\n                if(user.user_name.search(target.value) != -1){\r\n                    filtered_list.push(user)\r\n                }\r\n            filtered_list.sort((a,b)=>b.followers_count - a.followers_count)\r\n            set_user_list(filtered_list)\r\n            \r\n            }\r\n        }\r\n        \r\n    }\r\n    let location = useLocation()\r\n\r\n    const mq = window.matchMedia('(min-width : 768px)')\r\n    console.log(mq.matches)\r\n\r\n    let ref = useRef({})\r\n\r\n    function show_preview(){\r\n        if (mq.matches){\r\n            ref.current['preview_window'].style.display = \"block\"\r\n            ref.current['blogians_window'].style.gridColumn = \"1 / span 1\"\r\n\r\n        }\r\n    }\r\n    function hide_preview(){\r\n        if  (mq.matches){\r\n            console.log(\"hide\")\r\n            ref.current['preview_window'].style.display = \"none\"\r\n            ref.current['blogians_window'].style.gridColumn = \"0 / span 0\"\r\n        }\r\n    }\r\n\r\n    return (<div className= \"holder\">\r\n\r\n    <div className=\"blogians\" ref = {el=>ref.current['blogians_window']=el} onDoubleClick= {()=>hide_preview()}>\r\n                <input className = \"blogiansInput\" onInput= {event=>search(event)} style= {{backgroundImage:`url(${blogiansIcon})`}} type = \"text\" placeholder = \"Search Blogians\" />\r\n                <div className=\"allBlogians\">\r\n                    {user_list.map(item=>{\r\n                        return(<BlogiansMiniProfile key = {item.user_id} user_details = {item}  onClick = {()=>show_preview()} />)\r\n                    })}\r\n                </div>\r\n            </div>\r\n            <div className=\"profile_preview\" ref  = {el=>ref.current['preview_window']=el}>\r\n                \r\n                <Switch >\r\n                <Route exact path = {`/Blogians/:user_id`}>\r\n                    {mq.matches?(<>\r\n                    <AppUserProfile />\r\n                    <button id = \"FullpageProfile\"> Fullpage </button>\r\n                    </>)\r\n                    : <Redirect to = \"/Login\" />}\r\n                </Route>\r\n                </Switch>\r\n                \r\n            </div>\r\n            </div>\r\n    )\r\n}\r\n\r\n\r\nfunction BlogiansMiniProfile(props){\r\n    let location = useLocation()\r\n    let ref = useRef({})\r\n    const session = useContext(Login_context)\r\n    let xhr = new XMLHttpRequest()\r\n    xhr.open('POST', appConfig.origin + \"backend_api/getprofilephoto\")\r\n    xhr.responseType = 'blob'\r\n    useEffect(()=>{\r\n    xhr.onreadystatechange = ()=>{\r\n        if (xhr.readyState == 4 && xhr.status == 200){\r\n           ref.current['profile_photo'].style.backgroundImage = `url(${URL.createObjectURL(xhr.response)})`\r\n        }\r\n    }\r\n    xhr.setRequestHeader(\"session\" , session)\r\n    xhr.setRequestHeader(\"photouid\" ,JSON.stringify( props.user_details.user_id))\r\n    xhr.send()}, [ref])\r\n    return(\r\n        <Link onClick = {()=>props.onClick()} style = {{textDecoration:'none',width : '100%',display:'flex', justifyContent:'center',placeItems:'center'}} to = {`/Blogians/${props.user_details.user_id}`}>\r\n        <div className=\"miniprofile\" >\r\n            <div className=\"profilePhoto\" ref = {el=>ref.current['profile_photo']=el}>\r\n            </div>\r\n            <div className=\"profile_name\">{props.user_details.user_name}</div>\r\n            <div className=\"follower_count\" style= {{backgroundImage : `url(${blogiansIcon})`}} >{props.user_details.followers_count > 0 ?props.user_details.followers_count:\"No\"} Followers</div>\r\n            {props.user_details.total_blogs > 0 ?<div className=\"tag\">🏹Blogger</div>:null}\r\n        </div>\r\n        </Link>\r\n    )\r\n}\r\n\r\nBlogiansMiniProfile.propTypes = {\r\n    user_details : PropTypes.object.isRequired\r\n}\r\n\r\n\r\n\r\nexport  default AppBlogians;\r\n"]},"metadata":{},"sourceType":"module"}